System.register(["jimu-core","jimu-ui/advanced/chart","jimu-theme","jimu-ui"],(function(e,t){var i={},a={},r={},l={};return{setters:[function(e){i.CONSTANTS=e.CONSTANTS,i.DataRecordsSelectionChangeMessage=e.DataRecordsSelectionChangeMessage,i.DataSourceComponent=e.DataSourceComponent,i.DataSourceManager=e.DataSourceManager,i.DataSourceStatus=e.DataSourceStatus,i.DataSourceTypes=e.DataSourceTypes,i.EsriFieldType=e.EsriFieldType,i.Immutable=e.Immutable,i.JimuFieldType=e.JimuFieldType,i.MessageManager=e.MessageManager,i.React=e.React,i.ReactRedux=e.ReactRedux,i.StatisticType=e.StatisticType,i.WidgetVersionManager=e.WidgetVersionManager,i.appActions=e.appActions,i.appConfigUtils=e.appConfigUtils,i.classNames=e.classNames,i.css=e.css,i.dataSourceUtils=e.dataSourceUtils,i.defaultMessages=e.defaultMessages,i.getAppStore=e.getAppStore,i.hooks=e.hooks,i.jsx=e.jsx,i.lodash=e.lodash,i.useIntl=e.useIntl},function(e){a.ActionMode=e.ActionMode,a.BarChart=e.BarChart,a.Gauge=e.Gauge,a.Histogram=e.Histogram,a.LimitBehavior=e.LimitBehavior,a.LineChart=e.LineChart,a.PieChart=e.PieChart,a.RESTFontDecoration=e.RESTFontDecoration,a.RESTFontStyle=e.RESTFontStyle,a.RESTFontWeight=e.RESTFontWeight,a.RESTHorizontalAlignment=e.RESTHorizontalAlignment,a.RESTSimpleFillSymbolStyle=e.RESTSimpleFillSymbolStyle,a.RESTSimpleLineSymbolStyle=e.RESTSimpleLineSymbolStyle,a.RESTSimpleMarkerSymbolStyle=e.RESTSimpleMarkerSymbolStyle,a.RESTSymbolType=e.RESTSymbolType,a.ScatterPlot=e.ScatterPlot,a.SelectionSource=e.SelectionSource,a.WebChartColoringPatterns=e.WebChartColoringPatterns,a.WebChartDataTransformations=e.WebChartDataTransformations,a.WebChartNullPolicyTypes=e.WebChartNullPolicyTypes,a.WebChartSortOrderKinds=e.WebChartSortOrderKinds,a.WebChartStackedKinds=e.WebChartStackedKinds,a.WebChartTimeAggregationTypes=e.WebChartTimeAggregationTypes,a.WebChartTimeIntervalUnits=e.WebChartTimeIntervalUnits,a.WebChartTypes=e.WebChartTypes,a.getSeriesType=e.getSeriesType,a.getSplitByField=e.getSplitByField,a.getSplitByValue=e.getSplitByValue},function(e){r.styled=e.styled,r.utils=e.utils},function(e){l.Alert=e.Alert,l.Button=e.Button,l.DataActionList=e.DataActionList,l.DataActionListStyle=e.DataActionListStyle,l.Loading=e.Loading,l.Tooltip=e.Tooltip,l.WidgetPlaceholder=e.WidgetPlaceholder,l.defaultMessages=e.defaultMessages}],execute:function(){e((()=>{var e={55099:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="m147.167 236-51.083-28.5L45 249.5v44.327l50.736-46.4 50.993 28.948 50.248-51.169 51.871 37.843 50.53-64.932L351 233.016V179l-50.583-28.5-51.083 62-52.085-59zM45 342.974v-42.366l51.43-47.035 51.175 29.052 49.915-50.83 52.3 38.156 50.635-65.068L351 239.055v42.443l-51.842-19.97-50.382 59.265-51.552-29.694-50.52 30.263-51.11-10.005zm0 5.899v5.627h306v-67.643l-50.325-19.385-50.783 59.735-52.618-30.306-49.644 29.737-51.057-9.995z" clip-rule="evenodd"></path></svg>'},37543:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M326 58v12H45V58zM258.473 73v12H45V73zM204.015 88v12H45V88zM159 119v12H45v-12zM131.605 134v12H45v-12zM109.512 149v12H45v-12zM195 180v12H45v-12zM158.953 195v12H45v-12zM129.884 210v12H45v-12zM245 241v12H45v-12zM196.938 256v12H45v-12zM158.178 271v12H45v-12zM174 302v12H45v-12zM143 317v12H45v-12zM118 332v12H45v-12zM24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#000" fill-rule="evenodd" d="M376 354.501v.999h-75.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zm-24.5.999v4h-1v-4z" clip-rule="evenodd"></path></svg>'},35374:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M24 107v-8h16v8zM24 56v-8h16v8zM24 158v-8h16v8zM24 209v-8h16v8zM24 261v-8h16v8zM24 311v-8h16v8zM24 362v-8h16v8zM128 376v-8h24v8zM72 376v-8h24v8zM189 376v-8h24v8zM250 376v-8h24v8zM311 376v-8h24v8zM58 77h12v281H58zM73 144.527h12V358H73zM88 198.984h12V358H88zM119 244h12v114h-12zM134 271.395h12V358h-12zM149 293.488h12V358h-12zM180 208h12v150h-12zM195 244.046h12v113.953h-12zM210 273.116h12V358h-12zM241 158h12v200h-12zM256 206.062h12V358h-12zM271 244.822h12V358h-12zM302 229h12v129h-12zM317 260h12v98h-12zM332 285h12v73h-12z"></path><path fill="#000" fill-rule="evenodd" d="M49 24h-1v28h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h22v-.998H49z" clip-rule="evenodd"></path></svg>'},9268:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" fill-rule="evenodd" d="M200 353.81c40.414 0 77.188-15.587 104.637-41.077l-45.849-45.848c-15.683 13.796-36.258 22.163-58.788 22.163-49.18 0-89.048-39.868-89.048-89.048 0-46.451 35.567-84.595 80.953-88.685V46.4C110.721 50.61 46.191 117.769 46.191 200c0 84.947 68.862 153.81 153.809 153.81m153.6-145.715c-1.842 35.533-15.744 67.876-37.69 93.014l-45.977-45.977c10.401-13.176 17.159-29.361 18.752-47.037zm.209-7.956.001-.139-.001-.139zm-.209-8.234C349.53 113.402 286.598 50.471 208.095 46.4v64.915c42.72 3.85 76.74 37.87 80.59 80.59zm-80.743 7.944c-.081-40.168-32.669-72.706-72.857-72.706-40.238 0-72.857 32.619-72.857 72.857s32.619 72.857 72.857 72.857c40.188 0 72.776-32.538 72.857-72.706zM200 370c93.888 0 170-76.112 170-170S293.888 30 200 30 30 106.112 30 200s76.112 170 170 170" clip-rule="evenodd"></path></svg>'},52953:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M197.5 75v-8h5v8h-2.499c13.367 0 26.637 1.634 39.523 4.834l2.06-7.689 4.83 1.295-2.056 7.673a164 164 0 0 1 34.592 14.141l3.885-6.729 4.33 2.5-3.87 6.703a164 164 0 0 1 29.87 22.572l5.276-5.276 3.535 3.535-5.245 5.246a164 164 0 0 1 23.134 29.557l6.11-3.527 2.5 4.33-6.064 3.501a164 164 0 0 1 14.796 34.623l6.354-1.703 1.294 4.83-6.297 1.687a164.057 164.057 0 0 1 5.38 37.397H370v5h-6.001a164 164 0 0 1-4.498 37.65l5.354 1.435-1.295 4.829-5.296-1.419q-.376 1.383-.776 2.76l-4.725-1.372a159.07 159.07 0 0 0-25.549-139.897A159.07 159.07 0 0 0 200.001 79.92a159.09 159.09 0 0 0-127.214 63.564 159.08 159.08 0 0 0-25.55 139.897l-4.725 1.373a165 165 0 0 1-.776-2.759l-5.296 1.419-1.294-4.83 5.353-1.434a164 164 0 0 1-4.498-37.65h-6v-5h6.06a164 164 0 0 1 5.381-37.397l-6.296-1.687 1.294-4.83 6.353 1.702a164 164 0 0 1 14.797-34.622l-6.064-3.501 2.5-4.33 6.11 3.527a164 164 0 0 1 23.133-29.557l-5.245-5.245 3.535-3.536 5.276 5.276a164 164 0 0 1 29.869-22.572l-3.869-6.702 4.33-2.5 3.885 6.728a164.014 164.014 0 0 1 34.592-14.141l-2.056-7.673 4.83-1.294 2.06 7.688A164 164 0 0 1 199.999 75z"></path><path fill="#000" d="M210 237c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10a10 10 0 0 1 3.793.744L290.5 146l-81.009 87.842c.33.993.509 2.055.509 3.158M14 274h19v9H14zM39 178H20v9h19zM90 78h19v9H90zM387 274h-19v9h19zM360 178h19v9h-19zM311 78h-19v9h19zM234 260h-67v24h67z"></path></svg>'},11030:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><g fill="#000" clip-path="url(#a)"><path d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill-rule="evenodd" d="M376 354.001V355h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4V50h-4v-1h4V27h.998v327.001z" clip-rule="evenodd"></path><path d="M197 88h28v14.518c-1.189-1.824-2.373-3.297-3.596-4.47C217.929 94.719 214.353 94 210.5 94c-4.416 0-8.372.968-12.177 4.463q-.667.613-1.323 1.326z"></path><path d="M217.252 102.38c2.15 2.06 4.569 5.915 7.748 13.241V355h-28V110.243c1.978-3.525 3.724-5.839 5.382-7.362 2.422-2.224 4.783-2.881 8.118-2.881 2.897 0 4.758.469 6.752 2.38M139 185h23.469c-2.319 6.846-4.803 14.204-7.472 22.11l-2.339 6.93c-4.225 12.512-8.819 23.915-13.658 34.3zM158.342 215.96c-5.845 17.31-12.397 32.564-19.342 45.985V355h28V190.329a31168 31168 0 0 0-6.479 19.176l-.001.003zM254 200.519c-4.784-14.9-8.89-27.635-12.463-38.519H226v193h28zM247.852 162A4705 4705 0 0 1 254 180.929V162zM255 229h8.497c4.771 12.412 11.402 26.515 19.503 40.651V355h-28zM269.937 229c3.476 8.784 7.878 18.388 13.063 28.208V229zM284 279h4.576a285 285 0 0 0 11.937 17.746A238 238 0 0 0 312 311.29V355h-28zM305.359 293.208a242 242 0 0 0 6.641 8.683V279h-16.335a275 275 0 0 0 9.694 14.208M138 309h-28v46h28zM109 338H81v17h28zM196 214h-28v141h28zM313 343h28v12h-28z"></path><path d="m158.214 208.523.006-.018c16.331-48.374 25.668-76.032 32.719-91.675 3.685-8.177 6.718-13.003 9.752-15.79 2.998-2.753 6.024-3.54 9.809-3.54 3.295 0 5.871.573 8.482 3.076 2.655 2.544 5.374 7.109 8.809 15.211 6.821 16.084 16.359 45.825 33.898 100.515l.001.002.348 1.084c6.953 21.681 22.476 53.045 42.705 80.432 20.215 27.367 45.212 50.876 71.148 56.668l.218-.976c-25.564-5.708-50.375-28.957-70.561-56.286-20.171-27.307-35.641-58.575-42.558-80.143l-.385-1.2c-17.507-54.588-27.055-84.36-33.893-100.486-3.441-8.115-6.224-12.846-9.038-15.543-2.858-2.74-5.719-3.354-9.174-3.354-3.965 0-7.257.838-10.485 3.804-3.192 2.932-6.293 7.918-9.988 16.116-7.071 15.688-16.422 43.386-32.726 91.684l-2.275 6.736c-31.261 92.582-87.728 130.231-110.202 138.692l.352.936c22.77-8.573 79.446-46.458 110.798-139.308z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M24 27h352v349H24z"></path></clipPath></defs></svg>'},11022:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="m299.88 232.358 50.866 28.707-.492.87-50.134-28.293-51.107 62.129-51.938-58.93-49.898 82.331-51.046-28.526-50.736 65.161-.79-.614 51.264-65.839 50.954 28.474 50.102-82.669 52.062 59.07z" clip-rule="evenodd"></path><circle cx="96" cy="290" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="355" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="318" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="236" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="295" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="234" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="262" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="m196.827 194.391 52.206 21.083 50.998-13.5 50.653 20.061-.368.93-50.347-19.94-51.002 13.501-51.794-20.917-50.083 68.113-50.937-41.948-50.712 94.961-.882-.471 51.288-96.038 51.063 42.052z" clip-rule="evenodd"></path><circle cx="96" cy="221" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="316" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="262" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="195" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="216" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="202" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="223" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="m350.81 117.892-50.581 40.065-51.304 13.58-51.791-30.875-50.044 68.06-50.983-41.986-50.693 75.044-.828-.56 51.308-75.955 51.016 42.013 49.956-67.94 52.209 31.125 50.696-13.42 50.419-39.935z" clip-rule="evenodd"></path><circle cx="96" cy="166" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="241" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="207" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="140" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="171" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="157" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="118" r="3" fill="#A8A8A8"></circle></svg>'},77150:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" fill-rule="evenodd" d="m191.995 203.185 120.501 124.388C282.524 353.981 243.18 370 200.095 370 106.154 370 30 293.846 30 199.905 30 108.68 101.815 34.228 191.995 30zM370 208.005c-1.961 41.827-19.029 79.703-45.87 108.295L219.219 208.005zM208.194 30C295.69 34.102 365.898 104.31 370 191.806H208.194z" clip-rule="evenodd"></path></svg>'},64322:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#525252" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zM24 75v8h16v-8zm0 61v8h16v-8zm0 68v-8h16v8zm0 54v8h16v-8zm0 69v-8h16v8zm9 49v-8h24v8zm52-8v8h24v-8zm50 0v8h24v-8zm50 0v8h24v-8zm52 8v-8h24v8zm52-8v8h24v-8zm52 8v-8h24v8zm6-287a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-48 14a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-31 38a8 8 0 1 1-16 0 8 8 0 0 1 16 0m-113 44a8 8 0 1 0 0-16 8 8 0 0 0 0 16m30 25a8 8 0 1 1-16 0 8 8 0 0 1 16 0m-58 40a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-30 42a8 8 0 1 1-16 0 8 8 0 0 1 16 0m38 4a8 8 0 1 1-16 0 8 8 0 0 1 16 0m45-30a8 8 0 1 1-16 0 8 8 0 0 1 16 0m41-36a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-13-58a8 8 0 1 0 0-16 8 8 0 0 0 0 16m61 1a8 8 0 1 1-16 0 8 8 0 0 1 16 0m38-30a8 8 0 1 1-16 0 8 8 0 0 1 16 0m40-16a8 8 0 1 1-16 0 8 8 0 0 1 16 0" clip-rule="evenodd"></path></svg>'},35496:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="m118.545 220.032-2.213-1.235a34 34 0 0 0-38.159 3.428L45 249.5v30.214c3.984-4.618 8.656-9.198 13.805-12.99 10.634-7.83 23.84-12.646 37.238-6.496 29.564 13.57 53.981 5.763 68.251-7.556 7.503-7.003 18.521-16.771 31.068-22.333 12.659-5.611 27.171-7.046 41.113 3.142 12.934 9.452 27.929 18.766 42.113 23.392 14.211 4.636 26.946 4.382 36.213-4.207 10.919-10.12 24.971-18.293 36.199-23.742V179l-25.766-14.517c-14.358-8.09-32.45-4.718-42.93 8.001l-9.791 11.883c-12.163 14.762-34.644 15.145-47.303.806-13.874-15.716-39.007-13.477-49.885 4.443l-11.151 18.367c-9.492 15.637-29.654 20.961-45.629 12.049M45 330.81v-43.161c4.46-5.852 10.235-12.086 16.77-16.899 9.974-7.344 21.185-11.028 32.187-5.978 31.436 14.43 58.019 6.236 73.749-8.444 7.497-6.997 17.979-16.229 29.682-21.418 11.591-5.138 24.079-6.203 36.137 2.608 13.066 9.549 28.571 19.235 43.512 24.109 14.914 4.864 29.929 5.118 41.162-5.294 9.791-9.074 22.321-16.579 32.801-21.834v58.189c-20.957 1.026-60.451 6.532-94.59 23.062-11.627 5.63-20.788 7.612-28.256 7.407-7.43-.204-13.377-2.577-18.596-5.998-5.075-3.326-9.417-7.604-13.815-11.936l-.544-.536c-4.499-4.429-9.142-8.934-14.494-11.877-2.913-1.603-5.764-2.165-8.579-1.826-2.765.333-5.3 1.511-7.66 3.058-2.354 1.542-4.663 3.539-6.965 5.644-.841.769-1.675 1.547-2.515 2.33l-.002.002c-1.514 1.412-3.05 2.845-4.697 4.292-5.061 4.447-10.666 8.565-17.579 10.7-6.854 2.116-15.212 2.347-25.886-1.371-18.507-6.446-34.021-3.557-45.85 2.755C54.5 321.849 49.149 326.317 45 330.81m0 7.804V354.5h306v-56.807c-20.516 1.032-59.158 6.456-92.41 22.557-12.123 5.87-22.087 8.138-30.573 7.905-8.522-.233-15.357-2.984-21.2-6.814-5.502-3.606-10.165-8.202-14.477-12.452l-.181-.178-.468-.461c-4.578-4.508-8.748-8.503-13.396-11.059-2.087-1.148-3.893-1.445-5.571-1.243-1.73.208-3.527.971-5.518 2.276-1.997 1.309-4.059 3.074-6.33 5.151-.768.702-1.568 1.448-2.394 2.218l-.002.002c-1.554 1.449-3.198 2.982-4.892 4.47-5.251 4.615-11.49 9.278-19.405 11.722-7.974 2.462-17.429 2.606-29.005-1.426-17.093-5.954-31.162-3.26-41.85 2.445-8.095 4.319-14.281 10.386-18.328 15.808" clip-rule="evenodd"></path></svg>'},95177:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M326.792 248.694c-15.426-8.706-34.876-5.079-46.128 8.6l-8.137 9.892c-12.332 14.991-35.153 15.38-47.987.817-13.619-15.452-38.319-13.253-48.994 4.361l-12.091 19.95c-9.081 14.984-28.398 20.085-43.693 11.538-13.593-7.597-30.696-4.133-40.262 8.154l-34.105 43.801-.79-.614 34.105-43.802c9.87-12.676 27.516-16.249 41.54-8.412 14.825 8.284 33.548 3.34 42.35-11.183l12.09-19.95c11.026-18.191 36.535-20.462 50.6-4.504 12.427 14.1 34.524 13.724 46.464-.791l8.137-9.892c11.561-14.055 31.544-17.78 47.392-8.836l23.463 13.242-.492.87z" clip-rule="evenodd"></path><circle cx="96" cy="300" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="355" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="306" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="258" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="278" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="245" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="262" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="M229.969 208.854c-19.296-7.793-41.421-1.516-53.749 15.251l-10.663 14.501c-10.031 13.642-29.46 16.062-42.532 5.298-13.896-11.444-34.79-7.303-43.27 8.577l-34.314 64.254-.882-.471 34.314-64.254c8.778-16.437 30.404-20.724 44.788-8.878 12.628 10.4 31.4 8.061 41.091-5.119l10.662-14.501c12.599-17.134 35.209-23.55 54.93-15.586l3.243 1.31a50.05 50.05 0 0 0 31.549 1.975l12.467-3.3a70.5 70.5 0 0 1 43.999 2.606l29.082 11.518-.368.93-29.082-11.518a69.5 69.5 0 0 0-43.376-2.569l-12.466 3.3a51.05 51.05 0 0 1-32.179-2.015z" clip-rule="evenodd"></path><circle cx="96" cy="239" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="316" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="250" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="208" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="213" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="206" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="223" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="m350.868 117.838-23.757 25.893a79.5 79.5 0 0 1-51.631 25.448l-11.951 1.048a45.5 45.5 0 0 1-27.275-6.244l-6.002-3.578c-18.785-11.198-43.003-6.299-55.959 11.32l-7.713 10.49c-10.587 14.398-31.092 16.952-44.887 5.591-13.721-11.299-34.19-8.333-44.14 6.396L45.414 241.78l-.828-.56 32.139-47.578c10.28-15.218 31.427-18.282 45.603-6.608 13.353 10.996 33.2 8.524 43.446-5.411l7.714-10.49c13.26-18.035 38.049-23.049 57.276-11.586l6.002 3.578a44.5 44.5 0 0 0 26.676 6.106l11.95-1.048a78.5 78.5 0 0 0 50.982-25.128l23.758-25.893z" clip-rule="evenodd"></path><circle cx="96" cy="181" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="241" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="194" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="155" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="167" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="162" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="118" r="3" fill="#A8A8A8"></circle></svg>'},42171:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M132.5 67v20h-87V67zM195.5 67v20h-61V67zM243.5 67v20h-46V67zM188.5 130v20h-143v-20zM259.5 130v20h-69v-20zM325.5 130v20h-64v-20zM158.5 191v20h-113v-20zM234.5 191v20h-74v-20zM282.5 191v20h-46v-20zM114.5 253v20h-69v-20zM158.5 253v20h-42v-20zM197.5 253v20h-37v-20zM100.5 315v20h-55v-20zM163.5 315v20h-61v-20zM228.5 315v20h-63v-20zM24 79v-8h16v8zM24 140v-8h16v8zM24 200v-8h16v8zM24 262v-8h16v8zM24 323v-8h16v8zM135 372v-8h24v8zM85 372v-8h24v8zM33 372v-8h24v8zM185 372v-8h24v8zM237 372v-8h24v8zM289 372v-8h24v8zM341 372v-8h24v8z"></path><path fill="#000" fill-rule="evenodd" d="M376 350.501v.999h-75.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zm-24.5.999v4h-1v-4z" clip-rule="evenodd"></path></svg>'},78418:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M24 107v-8h16v8zM24 56v-8h16v8zM24 158v-8h16v8zM24 209v-8h16v8zM24 261v-8h16v8zM24 311v-8h16v8zM24 362v-8h16v8zM128 376v-8h24v8zM68 376v-8h24v8zM189 376v-8h24v8zM250 376v-8h24v8zM311 376v-8h24v8zM70 271h20v87H70zM70 208h20v61H70zM70 160h20v46H70zM130 215h20v143h-20zM130 144h20v69h-20zM130 78h20v64h-20zM190 245h20v113h-20zM190 169h20v74h-20zM190 121h20v46h-20zM252 289h20v69h-20zM252 245h20v42h-20zM252 206h20v37h-20zM313 303h20v55h-20zM313 240h20v61h-20zM313 175h20v63h-20z"></path><path fill="#000" fill-rule="evenodd" d="M49 24h-1v28h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h22v-.998H49z" clip-rule="evenodd"></path></svg>'},96984:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M132 64v20H45V64zM195 64v20h-61V64zM350 64v20H197V64zM188 124v20H45v-20zM286 124v20h-96v-20zM350 124v20h-62v-20zM158 184v20H45v-20zM234 184v20h-74v-20zM350 184v20H236v-20zM114 246v20H45v-20zM272 246v20H116v-20zM350 246v20h-76v-20zM100 307v20H45v-20zM184 307v20h-82v-20zM350 307v20H186v-20zM24 79v-8h16v8zM24 140v-8h16v8zM24 200v-8h16v8zM24 262v-8h16v8zM24 323v-8h16v8zM135 372v-8h24v8zM85 372v-8h24v8zM33 372v-8h24v8zM185 372v-8h24v8zM237 372v-8h24v8zM289 372v-8h24v8zM341 372v-8h24v8z"></path><path fill="#000" fill-rule="evenodd" d="M376 350.501v.999h-75.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zm-24.5.999v4h-1v-4z" clip-rule="evenodd"></path></svg>'},46703:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M24 107v-8h16v8zM24 56v-8h16v8zM24 158v-8h16v8zM24 209v-8h16v8zM24 261v-8h16v8zM24 311v-8h16v8zM24 362v-8h16v8zM128 376v-8h24v8zM68 376v-8h24v8zM189 376v-8h24v8zM250 376v-8h24v8zM311 376v-8h24v8zM70 271h20v87H70zM70 208h20v61H70zM70 72h20v134H70zM130 215h20v143h-20zM130 117h20v96h-20zM130 72h20v43h-20zM190 245h20v113h-20zM190 169h20v74h-20zM190 72h20v95h-20zM252 289h20v69h-20zM252 131h20v156h-20zM252 72h20v57h-20zM313 303h20v55h-20zM313 219h20v82h-20zM313 72h20v145h-20z"></path><path fill="#000" fill-rule="evenodd" d="M49 24h-1v28h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h22v-.998H49z" clip-rule="evenodd"></path></svg>'},66503:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m11.366 7.841-.732-.682-3.125 3.349-1.635-1.84-.748.664 2.365 2.66z"></path><path fill="#000" fill-rule="evenodd" d="M4.5 3V1.167C4.5.469 5.204 0 6 0h4c.796 0 1.5.47 1.5 1.167V3h4a.5.5 0 0 1 0 1H14l-.929 11.077a1 1 0 0 1-.997.923H3.926a1 1 0 0 1-.997-.923L2 4H.5a.5.5 0 0 1 0-1zM3.003 4h9.994l-.923 11H3.926zM10.5 1v2h-5V1c0-.04 5-.04 5 0" clip-rule="evenodd"></path></svg>'},41389:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707zM7 6h3v1H7v3H6V7H3V6h3V3h1z" clip-rule="evenodd"></path></svg>'},60882:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M16 11V0H5v3.5h1V1h9v9H8.5v1zM.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595zm.996 1.726-.01 5.644 1.527-1.684 2.91 5.771 1.154-.667-2.91-5.77 2.222-.48z" clip-rule="evenodd"></path></svg>'},79244:e=>{"use strict";e.exports=i},1888:e=>{"use strict";e.exports=r},14321:e=>{"use strict";e.exports=l},82972:e=>{"use strict";e.exports=a}},t={};function o(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var n={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(n),o.d(n,{__set_webpack_public_path__:()=>qt,default:()=>Ut});var e=o(79244),t=o(82972);var i;!function(e){e.ByGroup="BYGROUP",e.ByField="BYFIELD"}(i||(i={}));const a="name",r="value",l="__outputid__",s="count",c="__other-slice__",u="__other-split-value__",v="minValue",d="maxValue",h={behaviorAfterLimit:t.LimitBehavior.Reject,maxBarChartSeriesCount:100,maxBarUniqueSeriesCountTotal:1e4,maxBarTwoSeriesCountPerSeries:1e3,maxBarTwoSeriesCountTotal:2e3,maxBarThreePlusSeriesCountPerSeries:100,maxBarThreePlusSeriesCountTotal:2e3,maxLineChartSeriesCount:100,maxLineUniqueSeriesCountTotal:1e4,maxLineTwoSeriesCountPerSeries:1e3,maxLineTwoSeriesCountTotal:2e3,maxLineThreePlusSeriesCountPerSeries:100,maxLineThreePlusSeriesCountTotal:2e3,maxScatterPointsBeforeAggregation:1e4,maxScatterPointsAfterAggregation:1e4,maxPieChartSliceCountTotal:300},p={hideEmptySeriesInLegend:!1},m="9.4.0";var S=o(1888);const g="var(--dark)",y="var(--dark)",f="var(--light-900)",b="var(--primary)",M="var(--dark-600)",T=["#5E8FD0","#77B484","#DF6B35","#DBCF4E","#41546D","#8257C2","#D6558B"],C=(T[2],e=>"mean"===e?"#A6CEE3":"median"===e?"#33A02C":"standardDeviation"===e?"#B2DF8A":"comparisonDistribution"===e?"#E31A1C":void 0),z=()=>({type:t.WebChartTypes.NumberAxisFormat,intlOptions:{style:"decimal",useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:3}}),w=(e,t=0)=>{var i;const a=null!==(i=null==e?void 0:e.length)&&void 0!==i?i:0;if(!(a<0))return(t%=a)<0&&(t=0),e[t]},A=(e,t=0,i)=>{let a=w(e,t);return a===i&&(a=w(e,t+1)),a},R=(e=0)=>w(T,e),x={family:"Avenir Next",size:14,style:t.RESTFontStyle.Normal,weight:t.RESTFontWeight.Normal,decoration:t.RESTFontDecoration.None},F={type:t.RESTSymbolType.TS,color:y,font:x,horizontalAlignment:t.RESTHorizontalAlignment.Center},D={type:t.RESTSymbolType.SLS,style:t.RESTSimpleLineSymbolStyle.Solid,color:f,width:1},E={type:t.RESTSymbolType.SFS,style:t.RESTSimpleFillSymbolStyle.Solid,color:b,outline:D},I={type:t.RESTSymbolType.SMS,style:t.RESTSimpleMarkerSymbolStyle.Circle,color:b,size:10,outline:D},O=(e=14)=>Object.assign(Object.assign({},x),{size:e}),_=(e="",t=14,i=y)=>Object.assign(Object.assign({},F),{text:e,color:i,font:O(t)}),L=(e=1,i=f,a=t.RESTSimpleLineSymbolStyle.Solid)=>Object.assign(Object.assign({},D),{width:e,color:i,style:a}),B=(e=g,t=1,i=f)=>Object.assign(Object.assign({},E),{color:e,outline:L(t,i)}),j=(e=b,t=0,i=10)=>Object.assign(Object.assign({},I),{color:e,size:i,outline:L(t)});function N(e){return{type:t.WebChartTypes.Overlay,visible:!1,created:!1,symbol:L(1,e)}}function k(e=T[2],i=3){return{type:t.WebChartTypes.Overlays,trendLine:{type:t.WebChartTypes.Overlay,created:!0,visible:!0,symbol:{type:"esriSLS",color:e,width:i}}}}const V=(e="",i=!0,a,r=y)=>({type:t.WebChartTypes.Text,visible:i,content:_(e,a,r)});const P=e=>{if(null==e||""===e)return;const i="string"==typeof e?e:(0,t.getSeriesType)(e);return i===t.WebChartTypes.BarSeries||i===t.WebChartTypes.LineSeries},W=e=>{if(null==e||""===e)return!1;const i="string"==typeof e?e:(0,t.getSeriesType)(e);return i===t.WebChartTypes.BarSeries||i===t.WebChartTypes.LineSeries||i===t.WebChartTypes.ScatterSeries||i===t.WebChartTypes.HistogramSeries},H={},U=(t,i)=>{var a;if(!i)return;if(null!=H[t])return H[t];const r=e.DataSourceManager.getInstance().getDataSource(i),l=null==r?void 0:r.getSchema(),o=null===(a=null==l?void 0:l.fields)||void 0===a?void 0:a[t];return H[t]=o,o},q=(e,t)=>{const i=U(e,t);return null==i?void 0:i.type},$=e=>{var i,a,r;const l=null==e?void 0:e.series,o=null!==(i=(0,t.getSeriesType)(l))&&void 0!==i?i:"barSeries",n=null==l?void 0:l[0];let s,c;if(!n)return[];if("barSeries"===o){const t=n.stackedType,i=null!==(a=null==e?void 0:e.rotated)&&void 0!==a&&a?"bar":"column",r="sideBySide"===t?"":t;s=i,c=r?`${r}-${i}`:i}else if("lineSeries"===o){const e=Y(l)?"area":"line";let t="";Q(l)&&(t="smooth"),s=e,c=t?`${t}-${e}`:e}else if("pieSeries"===o){s="pie";c=(null!==(r=null==n?void 0:n.innerRadius)&&void 0!==r?r:0)>0?"donut":"pie"}else"scatterSeries"===o?(s="scatter",c="scatter"):"histogramSeries"===o?(s="histogram",c="histogram"):"gaugeSeries"===o&&(s="gauge",c="gauge");return[s,c]};const G=e=>null!=(null==e?void 0:e.groupByFieldsForStatistics)?i.ByGroup:null!=(null==e?void 0:e.outStatistics)?i.ByField:void 0,J=e=>{var t,i,a;return(null===(t=null==e?void 0:e.outFields)||void 0===t?void 0:t.length)?"no_aggregation":null===(a=null===(i=null==e?void 0:e.outStatistics)||void 0===i?void 0:i[0])||void 0===a?void 0:a.statisticType},K=e=>{var t;return null===(t=null==e?void 0:e.groupByFieldsForStatistics)||void 0===t?void 0:t[0]},Q=e=>(null==e?void 0:e[0]).lineSmoothed,Y=e=>(null==e?void 0:e[0]).showArea,Z=e=>{if(!e||!e.includes(" "))return[];const t=e.lastIndexOf(" ");if(t!==e.indexOf(" ")){return[e.substring(0,t),e.substring(t+1)]}return e.split(" ")},X=/\(|\)|\[|\]|\%/gm,ee=(e,t)=>((null==e?void 0:e.match(X))&&(e=e.replace(X,"__")),"no_aggregation"!==t?`${t}_of_${e}`:e),te=(e,t)=>"no_aggregation"!==t?`${S.utils.uppercaseFirstLetter(t)} of ${e}`:e,ie={sum:"sumOfField",avg:"meanOfField",min:"minOfField",max:"maxOfField",count:"count",percentile_cont:"medianOfField"},ae=(e,t,i)=>{let a=ee(e,t);return a=`${a}_of_${i}`,a},re={timeIntervalSize:1,timeIntervalUnits:t.WebChartTimeIntervalUnits.Months,timeAggregationType:t.WebChartTimeAggregationTypes.Start,trimIncompleteTimeInterval:!1,nullPolicy:t.WebChartNullPolicyTypes.Interpolate},le=(e,i=0,a)=>{var r,l;if(!e)return null;const{type:o="lineSeries",dataLabels:n,dataTooltipVisible:s}=e;let u=null;if("barSeries"===o){const{fillSymbol:l,stackedType:o=t.WebChartStackedKinds.Side,hideOversizedStackedLabels:n=!1}=e;if(u=function(e=0,i){var a;const r=(null==i?void 0:i.color)?null==i?void 0:i.color:A(null!==(a=null==i?void 0:i.colors)&&void 0!==a?a:T,e,null==i?void 0:i.preSerieColor);return{type:t.WebChartTypes.BarSeries,id:"",name:"",x:"",y:"",colorType:t.WebChartColoringPatterns.Single,stackedType:t.WebChartStackedKinds.Side,fillSymbol:B(r,0),dataLabels:V("",!1,10,M),rotated:!1}}(i,a),u.stackedType=o,u.hideOversizedStackedLabels=n,l)if(!(null==a?void 0:a.color)&&(null==a?void 0:a.preSerieColor)){const e=A(null!==(r=null==a?void 0:a.colors)&&void 0!==r?r:T,i,a.preSerieColor);u.fillSymbol=Object.assign(Object.assign({},l),{color:e})}else u.fillSymbol=l}else if("lineSeries"===o){const{stackedType:r=t.WebChartStackedKinds.Side,lineSmoothed:o=!1,showArea:n=!1,markerVisible:s=!1,lineSymbol:c,markerSymbol:v}=e;if(u=function(e=0,i){var a;const r=(null==i?void 0:i.color)?null==i?void 0:i.color:A(null!==(a=null==i?void 0:i.colors)&&void 0!==a?a:T,e,null==i?void 0:i.preSerieColor);return{type:t.WebChartTypes.LineSeries,id:"",name:"",x:"",y:"",colorType:t.WebChartColoringPatterns.Single,stackedType:t.WebChartStackedKinds.Side,lineSymbol:L(2,r),dataLabels:V("",!1,10,M),rotated:!1}}(i,a),u.stackedType=r,u.lineSmoothed=o,u.showArea=n,u.markerVisible=s,c)if(!(null==a?void 0:a.color)&&(null==a?void 0:a.preSerieColor)){const e=A(null!==(l=null==a?void 0:a.colors)&&void 0!==l?l:T,i,a.preSerieColor);u.lineSymbol=Object.assign(Object.assign({},c),{color:e})}else u.lineSymbol=c;v&&(u.markerSymbol=v)}else if("pieSeries"===o){const{innerRadius:i=0,startAngle:a=0,endAngle:r=360}=e;u=function(e=0){const i=R(0);return{type:t.WebChartTypes.PieSeries,colorType:t.WebChartColoringPatterns.Single,id:"",name:"",x:"",y:"",innerRadius:e,startAngle:0,endAngle:360,displayNumericValueOnDataLabel:!0,displayPercentageOnDataLabel:!1,displayNumericValueOnTooltip:!0,displayPercentageOnTooltip:!0,dataLabelsOffset:0,sliceGrouping:{sliceId:c,percentageThreshold:0,label:"Other"},numericValueFormat:z(),percentValueFormat:{type:t.WebChartTypes.NumberAxisFormat,intlOptions:{style:"percent",notation:"standard",minimumFractionDigits:0,maximumFractionDigits:3}},fillSymbol:B(i,1,"var(--light-100)"),dataLabels:V("",!1,10,M)}}(),u.innerRadius=i,u.startAngle=a,u.endAngle=r}else if("scatterSeries"===o){const{markerSymbol:i,overlays:a}=e;u=function(){const e=R(0);return{type:t.WebChartTypes.ScatterSeries,colorType:t.WebChartColoringPatterns.Single,id:"",name:"",x:"",y:"",markerSymbol:j(e,0,20),overlays:k()}}(),i&&(u.markerSymbol=i),a&&(u.overlays=a)}else if("histogramSeries"===o){const{fillSymbol:i,binCount:a,overlays:r,dataTransformationType:l}=e;u=function(e=t.WebChartDataTransformations.None){const i=R(0);return{type:t.WebChartTypes.HistogramSeries,colorType:t.WebChartColoringPatterns.Single,id:"",name:"",x:"",binCount:15,overlays:{type:t.WebChartTypes.Overlays,mean:N(C("mean")),median:N(C("median")),standardDeviation:N(C("standardDeviation")),comparisonDistribution:N(C("comparisonDistribution"))},dataTransformationType:e,fillSymbol:B(i,1,"var(--light-100)"),dataLabels:V("",!1,10,M),rotated:!1}}(),u.binCount=a,r&&(u.overlays=r),i&&(u.fillSymbol=i),l&&(u.dataTransformationType=l)}else if("gaugeSeries"===o){const{valueConversion:i,featureIndex:a=0}=e;u={type:t.WebChartTypes.GaugeSeries,id:"",name:"",x:""},u.valueConversion=i,u.featureIndex=a}return n&&"gaugeSeries"!==o&&(u.dataLabels=n),null!=s&&(u.dataTooltipVisible=s),u},oe=(e,t,i=0,a)=>{var r;let l=e.find((e=>e.id===t));if(!l){const t=null!==(r=e[i])&&void 0!==r?r:e[0],{type:a,dataLabels:o,dataTooltipVisible:n}=t,{stackedType:s,hideOversizedStackedLabels:c}=t,{lineSmoothed:u,showArea:v,markerVisible:d,markerSymbol:h}=t,{innerRadius:p,startAngle:m,endAngle:S}=t;l={type:a,dataLabels:o,dataTooltipVisible:n,hideOversizedStackedLabels:c,stackedType:s,lineSmoothed:u,showArea:v,markerVisible:d,markerSymbol:h,innerRadius:p,startAngle:m,endAngle:S}}return le(l,i,a)},ne=(t,i,a)=>{const{propSeries:r,name:l,categoryField:o,numberField:n,timeIntervalUnits:s,splitByField:c,splitByFieldType:u,splitByValue:v}=t;let d=oe(r,v,i,a);const h=`${v}`,p=n;d.id=h,d.x=o,d.y=p,d.name=l||h,s&&(d=Object.assign(Object.assign(Object.assign({},d),re),{timeIntervalUnits:s}));const m={where:`${c}=${u===e.JimuFieldType.String?`'${v}'`:v}`};return d.query=m,d},se=(i,a,r,l,o=!1,n)=>{var s;const c=((e,i)=>{var a,r,l,o;const n=null!==(r=null===(a=null==i?void 0:i.groupByFieldsForStatistics)||void 0===a?void 0:a[0])&&void 0!==r?r:"",s=null==i?void 0:i.outStatistics,c=null==i?void 0:i.outFields,u=null==i?void 0:i.where,v=(0,t.getSplitByField)(u,!0),d=null!==(l=J(i))&&void 0!==l?l:"count",h=null==e?void 0:e.timeIntervalUnits;return{splitByField:v,categoryField:n,numericFields:c||(null===(o=null==s?void 0:s.map((e=>e.onStatisticField)))||void 0===o?void 0:o.filter((e=>!!e))),statisticType:d,timeIntervalUnits:h}})(i[0],a),{splitByField:u,categoryField:v,numericFields:d,timeIntervalUnits:h}=c,p=d[0];let m=null!==(s=null==n?void 0:n.preSerieColor)&&void 0!==s?s:"";const S=l.map(((a,l)=>{var s,c,d;let S=i.find((i=>(0,t.getSplitByValue)({where:i.query.where,normalize:!1})===(r===e.JimuFieldType.String?`'${a}'`:a)));if(!S){S=ne({propSeries:i,categoryField:v,numberField:p,timeIntervalUnits:h,splitByField:u,splitByFieldType:r,splitByValue:a},l,Object.assign(Object.assign({},n),{preSerieColor:m})),S.deletable=o,m=null!==(c=null===(s=S.fillSymbol)||void 0===s?void 0:s.color)&&void 0!==c?c:null===(d=S.lineSymbol)||void 0===d?void 0:d.color,n.symbol&&("barSeries"===S.type?S.fillSymbol=n.symbol:"lineSeries"===S.type&&(S.lineSymbol=n.symbol))}return S}));return(0,e.Immutable)(S)},ce=(e,t)=>{var i,a,r,l,o,n,s,c,u,v;return P(e)||"pieSeries"===e?t.outFields?!(!(null===(i=null==t?void 0:t.outFields)||void 0===i?void 0:i[0])||!(null===(a=null==t?void 0:t.groupByFieldsForStatistics)||void 0===a?void 0:a[0])):(null==t?void 0:t.groupByFieldsForStatistics)?!!(null===(r=null==t?void 0:t.groupByFieldsForStatistics)||void 0===r?void 0:r[0])&&!!(null===(o=null===(l=null==t?void 0:t.outStatistics)||void 0===l?void 0:l[0])||void 0===o?void 0:o.onStatisticField):!!(null===(s=null===(n=null==t?void 0:t.outStatistics)||void 0===n?void 0:n[0])||void 0===s?void 0:s.onStatisticField):"scatterSeries"===e?!!(null===(c=null==t?void 0:t.outFields)||void 0===c?void 0:c[1]):"histogramSeries"===e?!!(null===(u=null==t?void 0:t.outFields)||void 0===u?void 0:u[0]):"gaugeSeries"===e?!!(null===(v=null==t?void 0:t.outStatistics)||void 0===v?void 0:v[0])&&t.outStatistics.every(((e,t)=>0!==t&&!e||!!(null==e?void 0:e.onStatisticField))):void 0},ue=(t,i,a,r)=>{const l=t,o=t;a=null!=a?a:t;let n=e.EsriFieldType.String,s=null;i===e.JimuFieldType.Number&&(s={digitSeparator:!0,places:3},n=e.EsriFieldType.Double);const c={jimuName:l,type:i,esriType:n,name:o,alias:a,format:s};return r&&(c.originFields=r),c},ve=(t,i)=>{let a=t;return i===e.StatisticType.Count?(a=a||(0,e.Immutable)({}),a=a.set("places",0)):i===e.StatisticType.Avg&&((null==a?void 0:a.places)||(a=a||(0,e.Immutable)({}),a=a.set("places",3))),a},de=(e,t,i)=>{let a=U(e,t);if(a)return i=i||e,a=a.set("jimuName",i).set("name",i),a=a.set("originFields",[e]),a},he=(t,i)=>{const a=((t,i)=>{var a;let r=(0,e.Immutable)({});const l=null===(a=null==t?void 0:t.outFields)||void 0===a?void 0:a[0];l&&[{name:"minValue",alias:"Min value"},{name:"maxValue",alias:"Max value"},{name:s,alias:"Count"}].forEach((({name:t,alias:a})=>{var o,n;const c=t,u=[l],v=e.JimuFieldType.Number,d=t===s?e.EsriFieldType.Integer:e.EsriFieldType.Double,h=U(l,i),p=null===(n=null===(o=null==h?void 0:h.format)||void 0===o?void 0:o.digitSeparator)||void 0===n||n,m=t===s?0:3,S={jimuName:c,type:v,esriType:d,name:t,alias:a,originFields:u,format:Object.assign(Object.assign({},null==h?void 0:h.format),{digitSeparator:p,places:m})};r=r.set(t,S)}));return r})(t,i);return{fields:a.asMutable({deep:!0})}},pe=(t,i)=>{const a=((t,i)=>{let a=(0,e.Immutable)({});const r=null==t?void 0:t.outFields;return r&&r.forEach((e=>{const t=de(e,i);t&&(a=a.set(e,t))})),a})(t,i);return{fields:a.asMutable({deep:!0})}},me=(t,i)=>{const a=((t,i)=>{let a=(0,e.Immutable)({});if(ce("gaugeSeries",t)){const e=[{name:"displayValue",alias:"Display value"},{name:v,alias:"Min value"},{name:d,alias:"Max value"}],r=t.outStatistics,l=r[0].onStatisticField;e.forEach((({name:e,alias:t},o)=>{var n;const s=r[o],c=(null==s?void 0:s.onStatisticField)||l,u=null!==(n=null==s?void 0:s.statisticType)&&void 0!==n?n:"count";let v=de(c,i,e);if(v){v=v.set("alias",t);const e=ve(v.format,u);e&&(v=v.set("format",e))}a=a.set(e,v)}))}return a})(t,i);return{fields:a.asMutable({deep:!0})}},Se=(i,a,r,l)=>{var o,n,s,c;let u=(0,e.Immutable)({});const v=null==i?void 0:i.groupByFieldsForStatistics;v.forEach((e=>{if(e){const t=de(e,a);t&&(u=u.set(e,t))}}));const d=null==i?void 0:i.outFields,h=null==i?void 0:i.outStatistics,p=(0,t.getSplitByField)(null==i?void 0:i.where,!0),m=(null==(S=r)?void 0:S.length)?(S.asMutable?S.asMutable({deep:!0}):S).map((e=>{const i=e.query.where;return(0,t.getSplitByValue)({where:i,normalize:!0})})):[];var S;const g=Array.from(new Set(m.concat(null!=l?l:[])));let y="",f="no_aggregation";v&&d?y=d[0]:v&&h&&(y=null===(o=h[0])||void 0===o?void 0:o.onStatisticField,f=null===(n=h[0])||void 0===n?void 0:n.statisticType);const b=null!==(c=null===(s=U(y,a))||void 0===s?void 0:s.alias)&&void 0!==c?c:y;return g.forEach((t=>{var i;const r=ae(y,f,t),l=((e,t,i)=>{let a=te(e,t);return a=`${a} of ${i}`,a})(b,f,t);if(y){let t=de(y,a,r);if(t){t=t.set("alias",l),t=t.set("originFields",t.originFields.concat(p));let a=t.format;f===e.StatisticType.Count?(a=a||(0,e.Immutable)({}),a=a.set("places",0)):f===e.StatisticType.Avg&&void 0===(null===(i=t.format)||void 0===i?void 0:i.places)&&(a=a||(0,e.Immutable)({}),a=a.set("places",3)),a&&(t=t.set("format",a))}u=u.set(r,t)}})),u},ge=(t,i)=>{const l=((t,i)=>{const l=null==t?void 0:t.groupByFieldsForStatistics,o=null==t?void 0:t.outFields,n=null==t?void 0:t.outStatistics;let s=(0,e.Immutable)({});if(l&&o)l.concat(o).forEach((e=>{if(e){const t=de(e,i);t&&(s=s.set(e,t))}}));else if(l&&n){const e=l[0];if(e){const t=de(e,i);t&&(s=s.set(e,t))}n.forEach((e=>{var t,a;const r=e.onStatisticField;if(r){const l=e.statisticType,o=e.outStatisticFieldName,n=null!==(a=null===(t=U(r,i))||void 0===t?void 0:t.alias)&&void 0!==a?a:r,c=te(n,l);let u=de(r,i,o);if(u){u=u.set("alias",c);const e=ve(u.format,l);e&&(u=u.set("format",e))}s=s.set(o,u)}}))}else if(!l&&n){const t=n.map((e=>e.onStatisticField)).asMutable({deep:!0}),i=a,l=r,o=ue(i,e.JimuFieldType.String,"Name",t),c=ue(l,e.JimuFieldType.Number,"Value",t);s=s.set(i,o),s=s.set(l,c)}return s})(t,i);return{fields:l.asMutable({deep:!0})}},ye=e=>{const t=e.getIdField(),i=e.getDataSourceJson().schema.fields[t];return null==i?void 0:i.asMutable({deep:!0})};var fe=function(e,t,i,a){return new(i||(i=Promise))((function(r,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function n(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,n)}s((a=a.apply(e,t||[])).next())}))};class be extends e.WidgetVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.6.0",description:"Rename `multipleBarType` to `stackedType`",upgrader:e=>{var t;if(!e)return e;let i=null===(t=e.webChart)||void 0===t?void 0:t.series;if(!(null==i?void 0:i.length))return e;i=i.map((e=>e=(e=e.set("stackedType",e.multipleBarType)).without("multipleBarType")));return e.setIn(["webChart","series"],i)}},{version:"1.7.0",description:"Use the `numericField` as the `id` of serie, build the `query` in the `series` as a data source",upgrader:t=>{var i;if(!t)return t;let a=null===(i=t.webChart)||void 0===i?void 0:i.series;if(!(null==a?void 0:a.length))return t;a=(t=>null==t?void 0:t.map((t=>{var i,a,r,l,o;if(null===(a=null===(i=t.query)||void 0===i?void 0:i.groupByFieldsForStatistics)||void 0===a?void 0:a.length){const i=null===(o=null===(l=null===(r=t.query)||void 0===r?void 0:r.outStatistics)||void 0===l?void 0:l[0])||void 0===o?void 0:o.onStatisticField,a=t.id;return i&&i!==a&&(t=e.Immutable.set(t,"id",i)),t}return t})))(a);const r=(e=>{var t,i;if(!(null==e?void 0:e.length))return null;let a=e[0].query;return(null===(t=a.outStatistics)||void 0===t?void 0:t.length)?((null===(i=null==a?void 0:a.groupByFieldsForStatistics)||void 0===i?void 0:i.length)&&(a=((e,t)=>(t.slice(1).forEach((t=>{var i,a,r;const l=(null!==(i=e.outStatistics)&&void 0!==i?i:[]).concat(null!==(r=null===(a=t.query)||void 0===a?void 0:a.outStatistics)&&void 0!==r?r:[]);e=e.set("outStatistics",l)})),e))(a,e)),a):null})(a);a=a.map((t=>e.Immutable.without(t,"query")));const l={query:r};return t.setIn(["webChart","series"],a).setIn(["webChart","dataSource"],l)}},{version:"1.8.0",description:"",upgrader:e=>e},{version:"1.9.0",description:"",upgrader:e=>e},{version:"1.10.0",description:"Upgrade `config.colorMatch` to `series[0].slices` for pie chart.",upgrader:l=>{let o=(i=>{var a;if(!i)return i;let r=null===(a=i.webChart)||void 0===a?void 0:a.series;if(!(null==r?void 0:r.length))return i;if("pieSeries"!==(0,t.getSeriesType)(r))return i;if("colorMatch"!==r[0].colorType)return i;let l=i.webChart.dataSource;const o=null==l?void 0:l.colorMatch;if(!o)return i;const n=o.colorMatches,s=r[0].fillSymbol,c=Object.entries(n).map((([e,t])=>{var i,a,r;const l=e,o=t._fillColor;return{sliceId:l,fillSymbol:B(o,null!==(a=null===(i=s.outline)||void 0===i?void 0:i.width)&&void 0!==a?a:0,null===(r=s.outline)||void 0===r?void 0:r.color)}}));return r=e.Immutable.setIn(r,["0","slices"],c),l=l.without("colorMatch"),i.setIn(["webChart","series"],r).setIn(["webChart","dataSource"],l)})(l);return o=(e=>{var l,o,n,s,c,u,v;if(!e)return e;let d=null===(o=null===(l=e.webChart)||void 0===l?void 0:l.dataSource)||void 0===o?void 0:o.query,h=null===(n=e.webChart)||void 0===n?void 0:n.series;const p=(0,t.getSeriesType)(h);if("pieSeries"!==p&&!P(p))return e;if(G(d)!==i.ByField)return e;const m=null!==(u=null===(c=null===(s=null==d?void 0:d.outStatistics)||void 0===s?void 0:s[0])||void 0===c?void 0:c.statisticType)&&void 0!==u?u:"sum";h=h.map((e=>{let t=e.x,i=e.y,l=e.y;if("FieldName"===t&&(t=a,e=e.set("x",t)),"FieldValue"===i&&(i=r,e=e.set("y",i)),"FieldValue"===l&&(l=r,e=e.set("id",l)),"Sum of value"===e.name){const t=`${o=m,"string"==typeof o?o.charAt(0).toUpperCase()+o.slice(1):null} of value`;e=e.set("name",t)}var o;return e}));const S=null===(v=d.orderByFields)||void 0===v?void 0:v[0];return(null==S?void 0:S.includes("FieldName"))?d=d.set("orderByFields",[S.replace("FieldName",a)]):(null==S?void 0:S.includes("FieldValue"))&&(d=d.set("orderByFields",[S.replace("FieldValue",r)])),e.setIn(["webChart","series"],h).setIn(["webChart","dataSource","query"],d)})(o),o}},{version:"1.11.0",description:"",upgrader:e=>e},{version:"1.12.0",description:"Upgrade web-chart version and upgrade the numeric type in the slice id of the pie chart to a string type, feature layer data source only supports the latter.",upgrader:e=>{var i;if(!e||!e.webChart)return e;let a=e.setIn(["webChart","version"],"6.2.1");const r=(e=>{var i,a;let r=e;if(null===(i=null==e?void 0:e.series)||void 0===i?void 0:i.length){const i=(0,t.getSeriesType)(e.series);if((i===t.WebChartTypes.BarSeries||i===t.WebChartTypes.LineSeries)&&void 0===e.rotated){const t=null!==(a=e.series[0].rotated)&&void 0!==a&&a;r=r.set("rotated",t);const i=r.series.map((e=>(void 0!==e.rotated&&(e=e.without("rotated")),e)));r=r.set("series",i)}}return r})(a.webChart);a=a.set("webChart",r);const l=null===(i=a.webChart)||void 0===i?void 0:i.series;if(!(null==l?void 0:l.length))return a;if("pieSeries"!==(0,t.getSeriesType)(l))return a;let o=l[0],n=o.sliceGrouping;n=n.set("sliceId",c).set("label",n.groupName),n=n.without("groupName"),o=o.set("sliceGrouping",n);const s=o.slices;if(null==s?void 0:s.length){const e=s.map((e=>("number"==typeof e.sliceId&&(e=e.set("sliceId",e.sliceId+"")),e)));o=o.set("slices",e)}return"colorMatch"===o.colorType&&(o=o.set("colorType","singleColor")),a=a.setIn(["webChart","series","0"],o),a}},{version:"1.13.0",description:"Upgrade series dataTooltipVisible to true, sortLabelsBy to originalValue, support max-length for the label of pie legend",upgrader:e=>{var i;if(!e)return e;let a=null===(i=e.webChart)||void 0===i?void 0:i.series;if(!(null==a?void 0:a.length))return e;a=a.map((e=>e=e.set("dataTooltipVisible",!0)));let r=e.setIn(["webChart","series"],a).setIn(["webChart","sortLabelsBy"],"originalValue");if("pieSeries"===(0,t.getSeriesType)(a)&&r.webChart.legend){let e=r.webChart.legend;e=e.set("labelMaxWidth",200),r=r.setIn(["webChart","legend"],e)}return r}},{version:"1.14.0",description:"Upgrade the use-fields of the use data source for by-field mode",upgradeFullInfo:!0,upgrader:a=>fe(this,void 0,void 0,(function*(){var r,l,o,n;const s=a.widgetJson,c=s.config;if(!c)return a;const u=null===(l=null===(r=c.webChart)||void 0===r?void 0:r.dataSource)||void 0===l?void 0:l.query;let v=null===(o=c.webChart)||void 0===o?void 0:o.series;const d=(0,t.getSeriesType)(v);if("pieSeries"!==d&&!P(d))return a;const h=G(u);if(h===i.ByField){const e=u.outStatistics.map((e=>e.onStatisticField)).asMutable({deep:!0});let t=s.useDataSources[0];if(!(null===(n=t.fields)||void 0===n?void 0:n.length)){t=t.set("fields",e);const i=s.set("useDataSources",[t]);return Object.assign(Object.assign({},a),{widgetJson:i})}}if("lineSeries"===d&&h===i.ByGroup){if("no_aggregation"===J(u)){v=v.map((t=>t=e.Immutable.without(t,["timeIntervalSize","timeIntervalUnits","timeAggregationType","trimIncompleteTimeInterval","nullPolicy"])));const t=c.setIn(["webChart","series"],v),i=s.set("config",t);return Object.assign(Object.assign({},a),{widgetJson:i})}}return a}))},{version:"1.15.0",description:"Upgrade the version of webChart to 9.4.0, remove time-bining options for no aggregation, set `hideOversizedStackedLabels` for bar series",upgrader:a=>{var r,l,o;if(!(null===(r=null==a?void 0:a.webChart)||void 0===r?void 0:r.series))return a;const n=a.setIn(["webChart","version"],"9.4.0"),s=null===(l=n.webChart.dataSource)||void 0===l?void 0:l.query;let c=null===(o=n.webChart)||void 0===o?void 0:o.series;const u=(0,t.getSeriesType)(c),v=G(s),d=J(s),h=void 0!==c[0].timeIntervalSize;return"lineSeries"===u&&v===i.ByGroup&&"no_aggregation"===d&&h?(c=c.map((t=>t=e.Immutable.without(t,["timeIntervalSize","timeIntervalUnits","timeAggregationType","trimIncompleteTimeInterval","nullPolicy"]))),n.setIn(["webChart","series"],c)):"barSeries"===u?(c=c.map((e=>e=e.set("hideOversizedStackedLabels",!1))),n.setIn(["webChart","series"],c)):n}}]}}const Me=new be,Te={chart:null,filter:null,dataSource:null,outputDataSource:null,recordsStatus:"none",queryVersion:0},Ce=(e,t)=>{switch(t.type){case"SET_CHART":return Object.assign(Object.assign({},e),{chart:t.value});case"SET_FILTER":return Object.assign(Object.assign({},e),{filter:t.value});case"SET_DATA_SOURCE":return Object.assign(Object.assign({},e),{dataSource:t.value});case"SET_OUTPUT_DATA_SOURCE":return Object.assign(Object.assign({},e),{outputDataSource:t.value});case"SET_RECORDS":return Object.assign(Object.assign({},e),{records:t.value});case"SET_RECORDS_STATUS":return Object.assign(Object.assign({},e),{recordsStatus:t.value});case"SET_QUERY_VERSION":return Object.assign(Object.assign({},e),{queryVersion:t.value});default:return e}},ze=e.React.createContext(void 0),we=e.React.createContext(void 0),Ae=t=>{const{defaultState:i,children:a}=t,[r,l]=e.React.useReducer(Ce,i||Te);return e.React.createElement(ze.Provider,{value:r},e.React.createElement(we.Provider,{value:l},a))},Re=()=>e.React.useContext(ze),xe=()=>e.React.useContext(we),Fe=t=>{const{widgetId:i,useDataSource:a,onQueryRequired:r,onDataSourceStatusChange:l}=t,{queryVersion:o}=Re(),n=xe();return e.React.createElement(e.DataSourceComponent,{widgetId:i,useDataSource:a,onDataSourceCreated:e=>{n({type:"SET_DATA_SOURCE",value:e})},onQueryRequired:()=>{n({type:"SET_QUERY_VERSION",value:o+1}),null==r||r()},onDataSourceStatusChange:l})};var De=function(e,t,i,a){return new(i||(i=Promise))((function(r,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function n(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,n)}s((a=a.apply(e,t||[])).next())}))};const Ee=(e,i,l)=>{var o,n,s,c;const u=null==e?void 0:e[0];if(!u||!(null===(o=null==i?void 0:i.outStatistics)||void 0===o?void 0:o.length))return;const v=i.orderByFields,d=i.outStatistics,h=null===(s=null===(n=null==d?void 0:d.map((e=>e.onStatisticField)))||void 0===n?void 0:n.filter((e=>!!e)))||void 0===s?void 0:s.asMutable(),p=a,m=r,S=null!==(c=null==h?void 0:h.map((e=>{var t,i;const a=u.getFieldValue(e),r={[p]:e,[m]:null!=a?a:0},o=null!==(i=null===(t=U(e,l.id))||void 0===t?void 0:t.alias)&&void 0!==i?i:e;return o!==e&&(r[p]=o,r[p+"_original"]=e),r})))&&void 0!==c?c:[];!function(e,i,a=!1){if(null==e||null==i)return;e.sort(((e,r)=>{let l=0;for(let o=0;o<i.length;o+=1){const[n,s]=Z(i[o]),c=s===t.WebChartSortOrderKinds.Descending&&!a,u=e[n],v=r[n];if("string"==typeof u&&"string"==typeof v)l=u.localeCompare(v,void 0,{numeric:!0}),c&&(l*=-1);else if(null==u)l=c?-1:1;else if(null==v)l=c?1:-1;else{if(u>v){l=c?-1:1;break}if(u<v){l=c?1:-1;break}}}return l}))}(S,v);return null==S?void 0:S.map(((e,t)=>{const i={attributes:e};return l.buildRecord(i)}))};const Ie=e=>{if(!e)return!1;const t=e.getInfo();return t&&Object.keys(t).length>0},Oe=t=>{if(!Ie(t))return!1;const i=t.getStatus();return i&&i!==e.DataSourceStatus.NotReady},_e=(e,i)=>De(void 0,void 0,void 0,(function*(){const a=((e,i)=>{const a=[e];var r;return{where:`${e} IS NOT NULL`,orderByFields:null!=(r=e)&&""!==`${r}`.trim()?[`${e} ${t.WebChartSortOrderKinds.Ascending}`]:[],outFields:a,returnDistinctValues:!0,returnGeometry:!1,pageSize:i}})(i,101);return(yield e.query(a)).records.map((e=>e.getFieldValue(i))).filter((e=>void 0!==e))})),Le=(0,e.Immutable)({}),Be=(t=Le)=>{const{groupByFieldsForStatistics:i,outFields:a,outStatistics:r,where:l}=t;return e.React.useMemo((()=>{let t=(0,e.Immutable)({});return l&&(t=t.set("where",l)),i&&(t=t.set("groupByFieldsForStatistics",i)),a&&(t=t.set("outFields",a)),r&&(t=t.set("outStatistics",r)),Object.keys(t).length>0?t:null}),[i,a,r,l])},je=(t,i)=>{const a=(0,e.getAppStore)().getState().appConfig.setIn(["dataSources",t],i);(0,e.getAppStore)().dispatch(e.appActions.appConfigChanged(a))},Ne=i=>{var a;const{widgetId:r,dataSourceId:l,webChart:o,onCreated:n,onSchemaChange:s}=i,{current:c}=e.React.useRef((0,e.getAppStore)().getState().appContext.isInBuilder),{dataSource:u,outputDataSource:v,records:d}=Re(),h=Be(null===(a=null==o?void 0:o.dataSource)||void 0===a?void 0:a.query),p=e.hooks.useLatest(null==o?void 0:o.series);e.hooks.useUpdateEffect((()=>{var i,a;if(u&&v&&h&&!h.where){const r=v.id,l=u.id,o=(0,t.getSeriesType)(p.current),n=((e,t,i,a)=>{const r=ye(e);let l=null;return"histogramSeries"===a?l=he(i,t):"gaugeSeries"===a?l=me(i,t):P(a)||"pieSeries"===a?l=ge(i,t):"scatterSeries"===a&&(l=pe(i,t)),l={idField:r.jimuName,label:e.getLabel(),fields:Object.assign({[r.jimuName]:r},l.fields)},l})(v,l,h,o);let s=null===(a=null===(i=(0,e.getAppStore)().getState())||void 0===i?void 0:i.appConfig.dataSources)||void 0===a?void 0:a[r];if(!s)return console.error(`The output data source of ${r} does not exist`),null;if(e.lodash.isDeepEqual(n,s.schema.asMutable({deep:!0})))return;s=s.set("schema",n),je(r,s)}}),[u,v,h]);const m=xe();e.React.useEffect((()=>{Ie(v)&&d&&(v.setSourceRecords(d),v.getStatus()!==e.DataSourceStatus.Unloaded&&(v.setStatus(e.DataSourceStatus.Unloaded),v.setCountStatus(e.DataSourceStatus.Unloaded)))}),[v,d]);const S=e.React.useMemo((()=>{if(l)return(0,e.Immutable)({dataSourceId:l,mainDataSourceId:l})}),[l]),g=t=>{var i,a,r;const l=e.DataSourceManager.getInstance().getDataSource(null===(r=null===(a=null===(i=null==t?void 0:t.getDataSourceJson())||void 0===i?void 0:i.originDataSources)||void 0===a?void 0:a[0])||void 0===r?void 0:r.dataSourceId);t&&l?t.setLayerDefinition(Object.assign(Object.assign({},e.dataSourceUtils.getLayerDefinitionIntersection(l.getLayerDefinition(),t)),{timeInfo:null})):console.error("Failed to sync origin data source info to chart output data source.")};return e.React.createElement(e.DataSourceComponent,{widgetId:r,useDataSource:S,onDataSourceCreated:e=>{g(e),m({type:"SET_OUTPUT_DATA_SOURCE",value:e}),null==n||n(e)},onDataSourceSchemaChange:t=>{v&&(null==s||s(t),g(v),c&&v.getStatus()!==e.DataSourceStatus.NotReady&&(v.setStatus(e.DataSourceStatus.NotReady),v.setCountStatus(e.DataSourceStatus.NotReady)))}})},ke=(t,i,r,l,o)=>{const{dataSource:n,outputDataSource:s}=Re(),c=xe(),u=K(i),v=e.React.useMemo((()=>((e,t)=>{var i;return ce(e,t)?(null===(i=t.outStatistics)||void 0===i?void 0:i.length)&&!t.groupByFieldsForStatistics?t.without("orderByFields"):t:null})(t,i)),[i,t]);e.React.useEffect((()=>{Oe(n)&&s&&null!=v&&(c({type:"SET_RECORDS_STATUS",value:"loading"}),n.query(v).then((e=>{var t;let r=e.records;return o&&(r=null!==(t=o(r,i,n))&&void 0!==t?t:[]),r=((e,t,i)=>{var r;const l=t.getIdField(),o=i||a,n=null==e?void 0:e.filter((e=>{var t;return null!=(null===(t=null==e?void 0:e.getData())||void 0===t?void 0:t[o])}));return null===(r=null==n?void 0:n.map(((e,i)=>{var a;if(t&&e.dataSource!==t){const r=e.getData(),n=o===l&&null!==(a=r[l])&&void 0!==a?a:i,s={attributes:Object.assign(Object.assign({},r),{[l]:n})};return t.buildRecord(s)}return e})))||void 0===r?void 0:r.filter((e=>!!e))})(r,s,u),r.length>l?(c({type:"SET_RECORDS",value:void 0}),void c({type:"SET_RECORDS_STATUS",value:"exceed"})):0===r.length?(c({type:"SET_RECORDS_STATUS",value:"empty"}),void c({type:"SET_RECORDS",value:r})):(c({type:"SET_RECORDS_STATUS",value:"loaded"}),void c({type:"SET_RECORDS",value:r}))}),(e=>{console.error(e),c({type:"SET_RECORDS",value:void 0}),c({type:"SET_RECORDS_STATUS",value:"error"})})))}),[n,s,v,r])},Ve=a=>{var r;const{widgetId:l,webChart:o,outputDataSourceId:n,useDataSource:s,chartLimits:c=h}=a,u=(0,t.getSeriesType)(null==o?void 0:o.series),v=null===(r=null==o?void 0:o.dataSource)||void 0===r?void 0:r.query,d=((e,i)=>{let a=1e3;const r=null==e?void 0:e.length;if(!r)return a;const l=(0,t.getSeriesType)(e);return P(l)?1===r?a=i.maxBarUniqueSeriesCountTotal:2===r?a=i.maxBarTwoSeriesCountPerSeries:r>2&&(a=i.maxBarThreePlusSeriesCountPerSeries):"pieSeries"===l&&(a=i.maxPieChartSliceCountTotal),a})(null==o?void 0:o.series,c),p=xe(),{queryVersion:m,outputDataSource:S}=Re(),g=G(v),y=e.React.useMemo((()=>g!==i.ByField||!P(u)&&"pieSeries"!==u?null:Ee),[g,u]);ke(u,v,m,d,y);return e.React.createElement(e.React.Fragment,null,e.React.createElement(Fe,{widgetId:l,useDataSource:s,onDataSourceStatusChange:(t,i)=>{Ie(S)&&(t===e.DataSourceStatus.NotReady&&t!==i&&(S.setStatus(e.DataSourceStatus.NotReady),S.setCountStatus(e.DataSourceStatus.NotReady),p({type:"SET_RECORDS",value:void 0}),p({type:"SET_RECORDS_STATUS",value:"none"})),t===e.DataSourceStatus.Unloaded&&i===e.DataSourceStatus.NotReady&&p({type:"SET_QUERY_VERSION",value:m+1}))}}),e.React.createElement(Ne,{webChart:o,widgetId:l,dataSourceId:n,originalDataSourceId:null==s?void 0:s.dataSourceId}))},Pe=i=>{var a,r,l,o;const{widgetId:n,useDataSource:s,outputDataSourceId:c,webChart:v,onSplitValuesChange:d,onSchemaChange:h}=i,p=xe(),{queryVersion:m,dataSource:S,outputDataSource:g}=Re(),[y,f]=e.React.useState(),b=null==s?void 0:s.dataSourceId,M=(0,t.getSplitByField)(null===(r=null===(a=null==v?void 0:v.dataSource)||void 0===a?void 0:a.query)||void 0===r?void 0:r.where,!0),T=null===(l=null==v?void 0:v.series)||void 0===l?void 0:l.length,C=e.hooks.useLatest(null==v?void 0:v.series),z=e.hooks.useLatest(M),w=e.hooks.useLatest(d),A=Be(null===(o=null==v?void 0:v.dataSource)||void 0===o?void 0:o.query);e.React.useEffect((()=>{M&&Oe(S)&&_e(S,M).then((e=>{f({[M]:e})}))}),[S,M,m,w]),e.hooks.useUpdateEffect((()=>{var t,i;if(S&&g&&(null==y?void 0:y[z.current])){const a=S.id,r=g.id,l=((e,t,i,a,r)=>{const l=ye(e),o=a.filter((e=>e.id!==u)),n=Se(i,t,o,r);return{idField:l.jimuName,label:e.getLabel(),fields:Object.assign({[l.jimuName]:l},n.asMutable({deep:!0}))}})(g,a,A,C.current,y[z.current]);let o=null===(i=null===(t=(0,e.getAppStore)().getState())||void 0===t?void 0:t.appConfig.dataSources)||void 0===i?void 0:i[r];if(!o)return console.error(`The output data source of ${a} does not exist`),null;if(e.lodash.isDeepEqual(l,o.schema.asMutable({deep:!0})))return;o=o.set("schema",l),je(r,o),w.current(y)}}),[S,g,y,A,T]);return e.React.createElement(e.React.Fragment,null,e.React.createElement(Fe,{widgetId:n,useDataSource:s,onDataSourceStatusChange:(t,i)=>{Ie(g)&&t===e.DataSourceStatus.NotReady&&t!==i&&(g.setStatus(e.DataSourceStatus.NotReady),g.setCountStatus(e.DataSourceStatus.NotReady),p({type:"SET_RECORDS",value:void 0}),p({type:"SET_RECORDS_STATUS",value:"none"}))}}),e.React.createElement(Ne,{webChart:v,widgetId:n,dataSourceId:c,originalDataSourceId:b,onCreated:e=>{const t=e.getSchema();null==h||h(t)},onSchemaChange:h}))};var We=o(14321),He=o(41389),Ue=o.n(He),qe=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};const $e=t=>{const i=window.SVG,{className:a}=t,r=qe(t,["className"]),l=(0,e.classNames)("jimu-icon jimu-icon-component",a);return i?e.React.createElement(i,Object.assign({className:l,src:Ue()},r)):e.React.createElement("svg",Object.assign({className:l},r))};var Ge=o(60882),Je=o.n(Ge),Ke=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};const Qe=t=>{const i=window.SVG,{className:a}=t,r=Ke(t,["className"]),l=(0,e.classNames)("jimu-icon jimu-icon-component",a);return i?e.React.createElement(i,Object.assign({className:l,src:Je()},r)):e.React.createElement("svg",Object.assign({className:l},r))},Ye=t=>{const i=e.hooks.useTranslation(We.defaultMessages),[a,r]=e.React.useState("selection"),{type:l="barSeries",className:o,onChange:n}=t;return e.React.createElement("div",{className:(0,e.classNames)("range-cursor-mode",o)},e.React.createElement(We.Tooltip,{title:i("SelectLabel")},e.React.createElement(We.Button,{size:"sm",className:"mr-1",icon:!0,type:"tertiary","aria-label":i("SelectLabel"),onClick:()=>{"pieSeries"!==l&&(n("selection"),r("selection"))},active:"selection"===a},e.React.createElement(Qe,null))),W(l)&&e.React.createElement(We.Tooltip,{title:i("ZoomLabel")},e.React.createElement(We.Button,{size:"sm",icon:!0,type:"tertiary","aria-label":i("ZoomLabel"),onClick:()=>{n("zoom"),r("zoom")},active:"zoom"===a},e.React.createElement($e,null))))};var Ze=o(66503),Xe=o.n(Ze),et=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};const tt=t=>{const i=window.SVG,{className:a}=t,r=et(t,["className"]),l=(0,e.classNames)("jimu-icon jimu-icon-component",a);return i?e.React.createElement(i,Object.assign({className:l,src:Xe()},r)):e.React.createElement("svg",Object.assign({className:l},r))},it=t=>{const i=e.hooks.useTranslation(We.defaultMessages),{type:a,className:r,onModeChange:l,onClearSelection:o}=t;return e.React.createElement("div",{className:(0,e.classNames)("selection-zoom d-flex",r)},e.React.createElement(Ye,{type:a,className:"mr-1",onChange:l}),e.React.createElement(We.Tooltip,{title:i("clearSelection")},e.React.createElement(We.Button,{size:"sm",icon:!0,"aria-label":i("clearSelection"),type:"tertiary",onClick:o},e.React.createElement(tt,null))))},at=e.css`
  .tool-dividing-line {
    height: 16px;
    width: 1px;
    background-color: var(--ref-palette-neutral-500);
  }
`,rt=i=>{var a,r,l;const{type:o="barSeries",className:n,widgetId:s,tools:c,enableDataAction:u}=i,v=e.hooks.useTranslation(We.defaultMessages),d=v("outputStatistics",{name:null!==(l=null===(r=null===(a=(0,e.getAppStore)().getState().appConfig.widgets)||void 0===a?void 0:a[s])||void 0===r?void 0:r.label)&&void 0!==l?l:"Chart"}),{outputDataSource:h,chart:p}=Re(),m=null==c?void 0:c.cursorEnable,S=m&&u,g=e.ReactRedux.useSelector((e=>{var t;return null===(t=null==e?void 0:e.dataSourcesInfo[null==h?void 0:h.id])||void 0===t?void 0:t.selectedIds})),y=e.React.useMemo((()=>h?[{name:d,type:"selected",dataSource:h,records:null==h?void 0:h.getSelectedRecords()}]:[]),[d,h,g]);return e.React.useEffect((()=>{m?null==p||p.setActionMode(t.ActionMode.MultiSelectionWithCtrlKey):null==p||p.setActionMode(t.ActionMode.None)}),[m,p]),(0,e.jsx)("div",{css:at,className:(0,e.classNames)("chart-tool-bar w-100 d-flex align-items-center justify-content-end px-2 pt-2",n),role:"group","aria-label":v("tools")},m&&(0,e.jsx)(it,{type:o,className:"mr-1",onModeChange:e=>{"selection"===e?null==p||p.setActionMode(t.ActionMode.MultiSelectionWithCtrlKey):"zoom"===e&&(null==p||p.setActionMode(t.ActionMode.Zoom))},onClearSelection:()=>{null==p||p.clearSelection()}}),S&&(0,e.jsx)("span",{className:"tool-dividing-line mx-1"}),u&&(0,e.jsx)(We.DataActionList,{widgetId:s,buttonType:"tertiary",listStyle:We.DataActionListStyle.Dropdown,dataSets:y}))},lt=(e,t,i)=>{var a;const r=[],l=null===(a=null==t?void 0:t.groupByFieldsForStatistics)||void 0===a?void 0:a[0];return null==e||e.forEach((e=>{const t=e.getData();let a=Object.assign({},t);l&&null==a[l]||(a=ot(a,e,l,i),r.push(a))})),r},ot=(e,t,i,a)=>{const r=t.getFieldValue(i),l=t.getFormattedFieldValue(i,a);return l!==r&&(e[i]=l,e[i+"_original"]=r),e},nt=(e,t,a)=>{let r=[];const l=G(t);return l===i.ByGroup?r=lt(e,t,a):l===i.ByField&&(r=null==e?void 0:e.map((e=>e.getData()))),r},st=(e,t,a)=>{let r=[];const l=G(t);return l===i.ByGroup?r=lt(e,t,a):l===i.ByField&&(r=null==e?void 0:e.map((e=>e.getData()))),r},ct=(e,t)=>{var i;const a=[],r=null===(i=null==t?void 0:t.outFields)||void 0===i?void 0:i[0];return null==e||e.forEach((e=>{const t=e.getData(),i=Object.assign({},t);r&&null==i[r]||a.push(i)})),a},ut=(e,t,i,a,r)=>{var l,o,n;let s=null,c=null,u=!0;return P(e)?(s=null!==(l=nt(t,i,r))&&void 0!==l?l:[],c={dataItems:s}):"pieSeries"===e?(s=null!==(o=st(t,i,r))&&void 0!==o?o:[],c={dataItems:s}):"scatterSeries"===e&&(s=null!==(n=ct(t,i))&&void 0!==n?n:[],c={dataItems:s},u=!1),[{inputData:c,processed:u},s]},vt={_widgetLabel:"Chart",bar1SeriesLimitation:"Bar or column charts with one series are limited to 10,000 bars in total. Please filter or re-aggregate your data and try again.",bar2SeriesLimitation:"Bar or column charts with two series are limited to 2,000 bars, or 1,000 bars per series. Please filter or re-aggregate your data and try again.",bar3SeriesLimitation:"Bar or column charts with three or more series are limited to 2,000 bars, or 100 bars per series. Please filter or re-aggregate your data and try again.",lineLimitation:"Line or area charts are limited to 10,000 value markers in total and maximum of 100 series. Please filter or re-aggregate your data and try again.",pieLimitation:"Cannot render, too many categories. Pie chart is limited to 300 categories as the maximum.",dataEmptyTip:"No data found."},dt=(e,a,r)=>{var l,o;const n=(0,t.getSeriesType)(e),s=null===(o=null===(l=null==a?void 0:a.outStatistics)||void 0===l?void 0:l[0])||void 0===o?void 0:o.statisticType;let c=e;return G(a)===i.ByField?c:s?((P(n)||"pieSeries"===n)&&(c=e.map((e=>{const t=e.name,i=((e,t,i)=>i(ie[e],{field:t}))(s,t,r);return e.set("name",i)}))),c):c},ht=(t,i)=>{const a=null==i?void 0:i.getLabel(),r=(t=>{var i,a,r;const l=e.appConfigUtils.getWidgetIdByOutputDataSource(t);return null===(r=null===(a=null===(i=(0,e.getAppStore)().getState())||void 0===i?void 0:i.appConfig.widgets)||void 0===a?void 0:a[l])||void 0===r?void 0:r.label})(t);return{dataSourceLabel:a,widgetLabel:r}},pt=e=>{const i=((e,t)=>ce(e,null==t?void 0:t.query))((0,t.getSeriesType)(null==e?void 0:e.series),null==e?void 0:e.dataSource);return i},mt=(t,i,a,r,l,o)=>{const[n,s]=e.React.useState("tooltip"),[c,u]=e.React.useState(""),v=e.ReactRedux.useSelector((e=>{var t,i;return null===(i=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[null==a?void 0:a.dataSourceId])||void 0===i?void 0:i.status})),d=e.ReactRedux.useSelector((e=>{var t,i;return null===(i=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[null==a?void 0:a.dataSourceId])||void 0===i?void 0:i.instanceStatus})),h=e.hooks.useTranslation(e.defaultMessages,We.defaultMessages,vt);return e.React.useEffect((()=>{if(d===e.DataSourceStatus.CreateError){s("basic");const e=h("dataSourceCreateError");u(e)}else if(s("exceed"===r?"basic":"tooltip"),v===e.DataSourceStatus.NotReady&&d===e.DataSourceStatus.Created){const t=e.DataSourceManager.getInstance().getDataSource(a.dataSourceId),i=((e,t)=>{if(!e||!t)return null;const i=ht(e,t);return["outputDataIsNotGenerated",{outputDsLabel:i.dataSourceLabel,sourceWidgetName:i.widgetLabel}]})(a,t);if(i){const e=h(...i);u(e)}}else if(i){const e=((e,t,i,a)=>{let r="";return a?r="dataEmptyTip":"exceed"===i?P(e)?"lineSeries"===e?r="lineLimitation":1===t?r="bar1SeriesLimitation":2===t?r="bar2SeriesLimitation":t>2&&(r="bar3SeriesLimitation"):"pieSeries"===e&&(r="pieLimitation"):"empty"===i?r="dataEmptyTip":"error"===i&&(r="widgetLoadError"),r})(t,l,r,o);if(e){const t=h(e);u(t)}}else u("")}),[v,d,t,i,r,o]),[n,c]},St={bar:o(37543),column:o(35374),"stacked-bar":o(42171),"stacked100-bar":o(96984),"stacked-column":o(78418),"stacked100-column":o(46703),line:o(11022),"smooth-line":o(95177),area:o(55099),"smooth-area":o(35496),pie:o(77150),donut:o(9268),scatter:o(64322),histogram:o(11030),gauge:o(52953)},gt=e.css`
  display: flex;
  justify-content: center;
  position: absolute;
  z-index: 1;
  .jimu-widget-placeholder {
    position: absolute;
    left: 0px;
    top: 0px;
  }
  .alert-tooltip-button{
    position: absolute;
    right: 10px;
    bottom: 10px;
  }
  .alert-panel {
    position: absolute;
    width: 100% !important;
    bottom: 0px;
  }
`,yt=t=>{const{templateType:i,showMessage:a,message:r,messageType:l="tooltip",className:o}=t,n=e.React.useMemo((()=>St[i]),[i]);return(0,e.jsx)("div",{className:(0,e.classNames)("placeholder-container w-100 h-100",o),css:gt},(0,e.jsx)(We.WidgetPlaceholder,{iconSize:"large",icon:n}),a&&(0,e.jsx)(We.Alert,{form:l,withIcon:!0,size:"small",type:"warning",text:r}))},ft=S.styled.div((e=>`\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      height: 100%;\n      background-color: ${e.background} !important;\n      .chart-toolbar {\n        height: ${e.showTools?"38px":"0px"};\n      }\n      .chart-container {\n        height: ${e.showTools?"calc(100% - 38px)":"100%"} !important;\n        > .web-chart {\n          height: 100%;\n          width: 100%;\n        }\n      }\n      .arcgis-charts-modal-content, .arcgis-charts-ampopup-content, .arcgis-charts-modal-curtain, .arcgis-charts-ampopup-curtain {\n        z-index: auto;\n      }\n    `)),bt=t=>{const{className:i,showPlaceholder:a,showLoading:r,background:l,tools:o,templateType:n,messageType:s,message:c,children:u}=t;return e.React.createElement(ft,{showTools:!!o,background:l,className:(0,e.classNames)("chart-root",i)},a&&e.React.createElement(yt,{templateType:n,message:c,messageType:s,showMessage:!!c}),!a&&e.React.createElement(e.React.Fragment,null,e.React.createElement("div",{className:"chart-toolbar"},o),e.React.createElement("div",{className:"chart-container"},u,r&&e.React.createElement(We.Loading,{type:"DONUT"}))))};var Mt=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};const Tt=e.React.forwardRef(((i,a)=>{var r;const{version:l,tooltipFormatter:o,dataLabelFormatter:n,enableResponsiveFeatures:s=!1,autoDisposeChart:c=!1,queueChartCreation:u=!0,useAnimatedCharts:v=!1,hideLicenceWatermark:d=!0,ignoreSmoothRenderingLimit:h=!1,legendValueLabelFormatter:p,setTimeBinningInfoWhenNotProvided:m,returnSelectionIndexes:S=!0,returnSelectionOIDs:g=!1,chartWillRender:y,hideEmptySeriesInLegend:f=!1,webMapWebChart:b}=i,M=Mt(i,["version","tooltipFormatter","dataLabelFormatter","enableResponsiveFeatures","autoDisposeChart","queueChartCreation","useAnimatedCharts","hideLicenceWatermark","ignoreSmoothRenderingLimit","legendValueLabelFormatter","setTimeBinningInfoWhenNotProvided","returnSelectionIndexes","returnSelectionOIDs","chartWillRender","hideEmptySeriesInLegend","webMapWebChart"]),T=e.React.useRef(null),C=e.hooks.useForkRef(a,T),z=(0,t.getSeriesType)(null===(r=i.webMapWebChart)||void 0===r?void 0:r.series),w={autoDisposeChart:c,enableResponsiveFeatures:s,queueChartCreation:u,useAnimatedCharts:v,hideLicenceWatermark:d,returnSelectionIndexes:S,returnSelectionOIDs:g};return e.hooks.useUpdateEffect((()=>{T.current&&T.current.refresh()}),[l]),e.React.createElement(e.React.Fragment,null,"barSeries"===z&&e.React.createElement(t.BarChart,Object.assign({ref:C,webMapWebChart:b},M,{dataLabelFormatter:n,tooltipFormatter:o},w,{hideEmptySeriesInLegend:f})),"lineSeries"===z&&e.React.createElement(t.LineChart,Object.assign({ref:C,webMapWebChart:b},M,{dataLabelFormatter:n,tooltipFormatter:o,ignoreSmoothRenderingLimit:h,setTimeBinningInfoWhenNotProvided:m},w,{hideEmptySeriesInLegend:f})),"pieSeries"===z&&e.React.createElement(t.PieChart,Object.assign({ref:C,webMapWebChart:b},M,{dataLabelFormatter:n,tooltipFormatter:o,legendValueLabelFormatter:p,chartWillRender:y},w)),"scatterSeries"===z&&e.React.createElement(t.ScatterPlot,Object.assign({ref:C,webMapWebChart:b},M,{dataLabelFormatter:n,tooltipFormatter:o,ignoreSmoothRenderingLimit:h},w)),"histogramSeries"===z&&e.React.createElement(t.Histogram,Object.assign({ref:C,webMapWebChart:b},M,{dataLabelFormatter:n,tooltipFormatter:o},w)),"gaugeSeries"===z&&e.React.createElement(t.Gauge,Object.assign({ref:C,webMapWebChart:b},M,w)))})),Ct=(e,t)=>{const i=e.y,a=t.outStatistics.filter((e=>e.outStatisticFieldName===i)),{groupByFieldsForStatistics:r,orderByFields:l,pageSize:o}=t,n={groupByFieldsForStatistics:r,outStatistics:a,orderByFields:l,num:o};return e.set("query",n)},zt=(e,t)=>{const{outStatistics:i,pageSize:a}=t,r={outStatistics:[i[0]],num:a};return e.set("query",r)},wt=(e,t)=>{const{orderByFields:i,pageSize:a,groupByFieldsForStatistics:r=[],outFields:l=[]}=t,o={orderByFields:i,num:a,outFields:r.concat(l)};return e.set("query",o)},At=(e,i)=>{var a;const r=e.query.where,l=(0,t.getSplitByValue)({where:r,normalize:!0});if(null===(a=i.outFields)||void 0===a?void 0:a.length){const{orderByFields:t,pageSize:a}=i,l={where:r,orderByFields:t,num:a};return e.set("query",l)}{const t=i.outStatistics[0].onStatisticField,a=i.outStatistics[0].statisticType,o=ae(t,a,l),n=[Object.assign(Object.assign({},i.outStatistics[0]),{outStatisticFieldName:o})],{groupByFieldsForStatistics:s,orderByFields:c,pageSize:u}=i,v={where:r,groupByFieldsForStatistics:s,outStatistics:n,orderByFields:c,num:u};return e.set("query",v).set("y",o)}},Rt=(e,a)=>{let r=null;const l=(0,t.getSeriesType)(e);if(!!a.where)r=At;else if(P(l)||"pieSeries"===l){const e=null==a?void 0:a.outFields;if(null==e?void 0:e.length)r=wt;else{G(a)===i.ByGroup&&(r=Ct)}}else"gaugeSeries"===l&&(r=zt);return r?null==e?void 0:e.map((e=>r(e,a))):e},xt=(e,t)=>{if(!(null==t?void 0:t.length)||!e)return e;const i=(e=>{const t={};return e.forEach((e=>{t[e.toUpperCase()]=e,t[e]=e.toUpperCase()})),t})(t);return e.map((e=>{const t={};return Object.keys(e).forEach((a=>{i[a]?t[i[a]]=e[a]:t[a]=e[a]})),t}))},Ft=(e,t)=>{let i=e;return i=Object.assign({},e),t&&"string"!=typeof i[t]&&(i[t]=String(i[t])),t&&void 0!==i[t+"_original"]&&delete i[t+"_original"],void 0!==i.__outputid__&&delete i.__outputid__,void 0!==i.arcgis_charts_slice_id&&delete i.arcgis_charts_slice_id,i},Dt=(e,t,i)=>e.filter((e=>{const a=Ft(e.getData(),i);return t.some((e=>{return t=a,i=e,Object.keys(i).every((e=>t[e]===i[e]));var t,i}))})),Et=(i,a,r,l,o)=>{const n=e.hooks.useLatest(l),s=e.React.useRef(),c=e.hooks.useEventCallback((l=>{var c,u;const v=null==a?void 0:a.getSourceRecords();if(!(null==v?void 0:v.length))return;const d=l.detail.selectionSource;if(!(d===t.SelectionSource.SelectionByClick||d===t.SelectionSource.SelectionByRange||d===t.SelectionSource.ClearSelection))return;const h=null===(c=r[0].query)||void 0===c?void 0:c.where,p=(0,t.getSplitByField)(h);let m=((e,t,i)=>e.map((e=>{const a=Object.assign({},e);if(i&&i&&void 0!==a[i+"_original"]&&delete a[i+"_original"],void 0!==a.arcgis_charts_slice_id&&delete a.arcgis_charts_slice_id,void 0!==a.__outputid__&&delete a.__outputid__,t&&delete a[t],void 0!==a.arcgis_charts_type_domain_field_name){const e=a.arcgis_charts_type_domain_field_name,t=a.arcgis_charts_type_domain_id_value;a[e]=t}return a})))(null!==(u=l.detail.selectionItems)&&void 0!==u?u:[],p,o);m=xt(m,n.current);const S=Dt(v,m,o),g=S.map((e=>e.getId()));s.current=g,e.MessageManager.getInstance().publishMessage(new e.DataRecordsSelectionChangeMessage(i,S)),a.selectRecordsByIds(g)})),u=e.ReactRedux.useSelector((e=>{var t,i;return null===(i=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[null==a?void 0:a.id])||void 0===i?void 0:i.selectedIds})),[v,d]=e.React.useState(),h=e.hooks.useEventCallback((e=>{const t=null==a?void 0:a.getSourceRecords();if(!(null==t?void 0:t.length))return;const i=((e,t,i)=>e.map((e=>{const a=t.find((t=>t.getId()===e));let r=null;if(a&&(r=Ft(a.getData(),i),void 0!==r.arcgis_charts_type_domain_field_name)){const e=r.arcgis_charts_type_domain_field_name,t=r.arcgis_charts_type_domain_id_label;r[e]=t}return r})).filter((e=>!!e)))(null!=e?e:[],t,o);return i}));e.React.useEffect((()=>{if(!u)return;const t=u.asMutable();if(e.lodash.isDeepEqual(t,s.current))return;s.current=t;let i=h(t);i=xt(i,n.current),d(i)}),[u]);return[e.React.useMemo((()=>({selectionItems:v})),[v]),c]};var It=function(e,t,i,a){return new(i||(i=Promise))((function(r,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function n(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,n)}s((a=a.apply(e,t||[])).next())}))};const Ot=[0,0,0,0];const _t=function(r){var o,n;const{className:s,widgetId:c,webChart:u,options:v,chartLimits:d,onInitDragHandler:h}=r,{outputDataSource:p,records:S,recordsStatus:g}=Re(),y=xe(),f=e.React.useRef(null),b=c+"-"+(null!==(o=null==u?void 0:u.id)&&void 0!==o?o:"chart"),M=(0,e.useIntl)(),T=e.hooks.useTranslation(vt,We.defaultMessages),C=e.React.useRef(null);let z=e.React.useMemo((()=>u.set("version",m).without("dataSource").set("id",b).set("background",Ot)),[b,u]);const w=(0,t.getSeriesType)(u.series),A=null===(n=null==u?void 0:u.dataSource)||void 0===n?void 0:n.query,R=G(A),x=K(A),F=null==u?void 0:u.series,D=e.React.useMemo((()=>{if(R===i.ByField)return[];const e=p?Object.keys(p.getSchema().fields):[];return e.length?e.filter((e=>e!==x&&e!==l)):void 0}),[R,p,x]),[E,I]=e.React.useMemo((()=>ut(w,S,A,F,M)),[w,S,A,F,M]);let O=e.React.useMemo((()=>((e,r,l)=>{var o,n,s;if("pieSeries"!==(0,t.getSeriesType)(e))return e;const c=null===(o=null==e?void 0:e[0])||void 0===o?void 0:o.slices;if(!c)return e;const u=G(r)===i.ByField?a:null===(n=null==r?void 0:r.groupByFieldsForStatistics)||void 0===n?void 0:n[0],v=u+"_original",d=null===(s=null==c?void 0:c.map((e=>{const t=e.sliceId,i=null==l?void 0:l.find((e=>{const i=e[v]||e[u];return null!=i&&(t===i||t===i+"")}));return i?e.set("sliceId",i[u]):null})))||void 0===s?void 0:s.filter((e=>!!e));return e.map((e=>e.set("slices",d)))})(F,A,I)),[I,A,F]);O=e.React.useMemo((()=>dt(O,A,T)),[O,A,T]),z=e.React.useMemo((()=>z.set("series",O)),[z,O]);const _=e.React.useMemo((()=>"loaded"!==g?C.current:(C.current=z,z)),[g,z]),L=e.React.useCallback((e=>{f.current=e,y({type:"SET_CHART",value:e})}),[y]),[B,j]=Et(c,p,F,D,x),N=e.React.useCallback((e=>It(this,void 0,void 0,(function*(){var t,i;const{chartConfig:a,slices:r}=e;let l=null===(i=null===(t=null==a?void 0:a.series)||void 0===t?void 0:t[0])||void 0===i?void 0:i.slices,o=a;return(null==l?void 0:l.length)&&(l=l.map((e=>{var t;const i=e.sliceId,a=null===(t=null==r?void 0:r.find((e=>e.originalLabel===i)))||void 0===t?void 0:t.sliceId;return a?Object.assign(Object.assign({},e),{sliceId:a}):e})),o=Object.assign(Object.assign({},a),{series:[Object.assign(Object.assign({},a.series[0]),{slices:l})]})),o}))),[]);return e.hooks.useEffectOnce((()=>{null==h||h(null,null,(()=>{f.current&&f.current.refresh()}))})),e.React.createElement(e.React.Fragment,null,_&&e.React.createElement(Tt,Object.assign({ref:L,className:s},v,{webMapWebChart:_,inlineData:E,chartWillRender:N,hideLoaderAnimation:!0,chartLimits:d,selectionData:B,arcgisChartsSelectionComplete:j})))},Lt=i=>{var a,r,l;const{widgetId:o,tools:n,options:s,enableDataAction:c=!0,webChart:u,chartLimits:v,useDataSource:d,defaultTemplateType:h,onInitDragHandler:p}=i,{recordsStatus:m,records:S}=Re(),g=(0,t.getSeriesType)(null==u?void 0:u.series),y=(null==n?void 0:n.cursorEnable)||!!(null==n?void 0:n.filter)||c,{valid:f,render:b}=((t,i,a)=>{const r=e.ReactRedux.useSelector((e=>{var i,a;return null===(a=null===(i=e.dataSourcesInfo)||void 0===i?void 0:i[t])||void 0===a?void 0:a.status})),l=e.React.useMemo((()=>pt(i)),[i]);return{valid:l,render:r&&r!==e.DataSourceStatus.NotReady&&l&&!!(null==a?void 0:a.length)}})(null==d?void 0:d.dataSourceId,u,S),M=(null===(a=$(u))||void 0===a?void 0:a[1])||h||"column",[T,C]=mt(g,f,d,m,null!==(l=null===(r=null==u?void 0:u.series)||void 0===r?void 0:r.length)&&void 0!==l?l:0),z=y?e.React.createElement(rt,{type:g,tools:n,widgetId:o,enableDataAction:c}):null;return e.React.createElement(bt,{templateType:M,messageType:T,message:C,showLoading:"loading"===m,background:null==u?void 0:u.background,className:"web-inlie-data-chart",showPlaceholder:!b,tools:z},e.React.createElement(_t,{className:"web-chart",options:s,widgetId:o,webChart:u,chartLimits:v,onInitDragHandler:p}))},Bt=(e=[],t)=>{const i=t.getIdField(),a=null==e?void 0:e.map(((e,a)=>{const r={attributes:null};let l=Object.assign({},e);return l[i]=a,l=(e=>{const t=e.arcgis_charts_type_domain_field_name;if("string"!=typeof t)return e;const i=e.arcgis_charts_type_domain_id_value;return e[t]&&i&&(e.arcgis_charts_type_domain_id_label=e[t],e[t]=i),e})(l),r.attributes=l,t.buildRecord(r)}));return a},jt=(e,i,a)=>{var r,l;if("gaugeSeries"===(0,t.getSeriesType)(e)){const e=null===(r=null==a?void 0:a.outStatistics)||void 0===r?void 0:r[1],t=null===(l=null==a?void 0:a.outStatistics)||void 0===l?void 0:l[2];if(e||t)return null==i?void 0:i.map((i=>{let a=i;return e&&(a=a.set("minimumFromField",e)),t&&(a=a.set("maximumFromField",t)),a}))}return i},Nt=[0,0,0,0];const kt=function(i){var a,r,o,n;const{className:s,widgetId:c,webChart:u,useDataSource:h,schemaFields:p,chartLimits:S,options:g,onInitDragHandler:y,onLayerStatusChange:f}=i,b=e.React.useRef(null),M=(0,t.getSeriesType)(null==u?void 0:u.series),T=null===(a=null==u?void 0:u.dataSource)||void 0===a?void 0:a.query,C=K(T),z=c+"-"+(null!==(r=null==u?void 0:u.id)&&void 0!==r?r:"chart"),w=xe(),{outputDataSource:A,dataSource:R,queryVersion:x,records:F}=Re(),D=(t=>{var i,a;const r=e.hooks.useCancelablePromiseMaker(),[l,o]=e.React.useState(null),n=e.ReactRedux.useSelector((e=>{var i,a;return null===(a=null===(i=e.dataSourcesInfo)||void 0===i?void 0:i[t])||void 0===a?void 0:a.instanceStatus})),s=null!==(a=null===(i=e.DataSourceManager.getInstance().getDataSource(t))||void 0===i?void 0:i.getMainDataSource().id)&&void 0!==a?a:t,c=e.ReactRedux.useSelector((e=>{var t,i;return null===(i=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[s])||void 0===i?void 0:i.sourceVersion})),u=e.ReactRedux.useSelector((e=>{var i,a;return null===(a=null===(i=e.dataSourcesInfo)||void 0===i?void 0:i[t])||void 0===a?void 0:a.sourceVersion}));return e.React.useEffect((()=>{if(n!==e.DataSourceStatus.Created)return;let i=e.DataSourceManager.getInstance().getDataSource(t);i?(i.type!==e.DataSourceTypes.SceneLayer&&i.type!==e.DataSourceTypes.BuildingComponentSubLayer||(i=i.getAssociatedDataSource()),r(i.createJSAPILayerByDataSource()).then((e=>{e.definitionExpression="",o(e)}))):console.error(`No data source founded for id: ${t}`)}),[r,t,n,c,u]),l})(null==h?void 0:h.dataSourceId),[E,I]=e.React.useState(0),O=e.hooks.useLatest(f),_=e.hooks.useLatest(F),L=e.React.useMemo((()=>{if("barSeries"===M||"lineSeries"===M||"pieSeries"===M)return p.filter((e=>e!==C&&e!==l))}),[M,p,C]),B=e.React.useRef(),j=e.React.useRef(),N=e.React.useRef(!1);e.React.useEffect((()=>{var e;N.current||null===(e=O.current)||void 0===e||e.call(O,D?"loaded":"loading"),N.current=!!D}),[D,O]);const k=e.React.useMemo((()=>{var e;const t=null!==(e=null==R?void 0:R.getCurrentQueryParams())&&void 0!==e?e:{},i=null==R?void 0:R.getMaxRecordCount();return t.pageSize=i,t}),[R,x]),V=e.React.useMemo((()=>{let t=null==R?void 0:R.getTimezone();return t&&(t=e.dataSourceUtils.getTimezoneAPIFromRuntime(t)),t}),[R]),{where:W,geometry:H,gdbVersion:U,time:q,distance:$,units:G,pageSize:J}=k,Q=((e,t)=>{if(null!=e||null!=t)return null==e&&null!=t?t:null!=e&&null==t?e:Math.min(e,t)})(J,null===(n=null===(o=u.dataSource)||void 0===o?void 0:o.query)||void 0===n?void 0:n.pageSize),Y=e.React.useMemo((()=>((e,i,a)=>{const r={};if(!(null==e?void 0:e.length))return i;const l=(0,t.getSeriesType)(e);let o=t.LimitBehavior.Reject;"scatterSeries"===l&&(r.maxScatterPointsBeforeAggregation=i.maxScatterPointsBeforeAggregation,r.maxScatterPointsAfterAggregation=i.maxScatterPointsAfterAggregation);let n="",s=-1;"barSeries"===l?(r.maxBarChartSeriesCount=i.maxBarChartSeriesCount,1===e.length?n="maxBarUniqueSeriesCountTotal":2===e.length?(r.maxBarTwoSeriesCountTotal=i.maxBarTwoSeriesCountTotal,n="maxBarTwoSeriesCountPerSeries"):e.length>2&&(r.maxBarThreePlusSeriesCountTotal=i.maxBarThreePlusSeriesCountTotal,n="maxBarThreePlusSeriesCountPerSeries")):"lineSeries"===l?(r.maxLineChartSeriesCount=i.maxLineChartSeriesCount,1===e.length?n="maxLineUniqueSeriesCountTotal":2===e.length?(r.maxLineTwoSeriesCountTotal=i.maxLineTwoSeriesCountTotal,n="maxLineTwoSeriesCountPerSeries"):e.length>2&&(r.maxLineThreePlusSeriesCountTotal=i.maxLineThreePlusSeriesCountTotal,n="maxLineThreePlusSeriesCountPerSeries")):"pieSeries"===l&&(n="maxPieChartSliceCountTotal");const c=i[n];return a&&a<=c?(s=a,o=t.LimitBehavior.RenderUpToTheLimit):s=c,n&&(r[n]=s),r.behaviorAfterLimit=o,r})(null==u?void 0:u.series,S,Q)),[S,Q,null==u?void 0:u.series]),Z=e.React.useMemo((()=>{var e;let t=null===(e=u.dataSource)||void 0===e?void 0:e.query;t&&(t=t.set("pageSize",Q));const i=Rt(u.series,t),a=jt(u.series,u.axes,t);return u.set("version",m).without("dataSource").set("series",i).set("axes",a).set("id",z).set("background",Nt)}),[z,u,Q]),X=e.React.useMemo((()=>{const e={};return W&&(e.where=W),H&&(e.geometry=H,$&&G&&(e.distance=$,e.units=G)),Object.keys(e).length?e:void 0}),[W,H,$,G]);e.hooks.useUpdateEffect((()=>{b.current&&D&&(U&&(D.gdbVersion=U),q&&(D.timeExtent=e.dataSourceUtils.changeJimuTimeToJSAPITimeExtent(q)),I((e=>e+1)))}),[D,U,q]),e.hooks.useEffectOnce((()=>{null==y||y(null,null,(()=>{b.current&&b.current.refresh(!1,!1)}))}));const ee=e.React.useCallback((e=>{b.current=e,w({type:"SET_CHART",value:e})}),[w]),te=e.hooks.useEventCallback((e=>{let t=((e,t)=>{let i=[];return P(e)||"pieSeries"===e||"scatterSeries"===e||"gaugeSeries"===e?i=null==t?void 0:t.dataItems:"histogramSeries"===e&&(i=null==t?void 0:t.bins),i})(M,e.detail);t=xt(t,L);const i=Bt(t,A);B.current=void 0,j.current=void 0,w({type:"SET_RECORDS",value:i})})),ie=e.hooks.useEventCallback((e=>{if("gaugeSeries"!==M||!_.current||!e.detail[0])return;const{minimum:t,maximum:i}=e.detail[0];if(t===B.current&&i===j.current)return;B.current=t,j.current=i;const a={[v]:t,[d]:i};let r=_.current.map((e=>e.getData()));r=((e,t)=>t&&e?e.map((e=>Object.assign(Object.assign({},e),t))):e)(r,a);const l=Bt(r,A);w({type:"SET_RECORDS",value:l})})),ae=e.hooks.useEventCallback((e=>{w({type:"SET_RECORDS",value:void 0}),w({type:"SET_RECORDS_STATUS",value:"error"})})),[re,le]=Et(c,A,u.series,L);return e.React.createElement(e.React.Fragment,null,D&&e.React.createElement(Tt,Object.assign({className:s,timeZone:V,version:E},g,{runtimeDataFilters:X,webMapWebChart:Z,layer:D,chartLimits:Y,ref:ee,selectionData:re,arcgisChartsSelectionComplete:le,arcgisChartsDataProcessComplete:te,arcgisChartsDataProcessError:ae,arcgisChartsAxesMinMaxChange:ie})))},Vt=i=>{var a,r,l;const{widgetId:o,tools:n,enableDataAction:s=!0,webChart:c,options:u,chartLimits:v,useDataSource:d,schemaFields:h,defaultTemplateType:p,onInitDragHandler:m}=i,{recordsStatus:S,dataSource:g,outputDataSource:y}=Re(),[f,b]=e.React.useState(!1),M=(t=>(null==t?void 0:t.isDataView)&&(null==t?void 0:t.dataViewId)===e.CONSTANTS.SELECTION_DATA_VIEW_ID&&!t.getSourceRecords().length)(g),T=(0,t.getSeriesType)(null==c?void 0:c.series),C=(null==n?void 0:n.cursorEnable)||!!(null==n?void 0:n.filter)||s,{valid:z,render:w}=((t,i)=>{const a=e.ReactRedux.useSelector((e=>{var i,a;return null===(a=null===(i=e.dataSourcesInfo)||void 0===i?void 0:i[t])||void 0===a?void 0:a.status})),r=e.ReactRedux.useSelector((e=>{var i,a;return null===(a=null===(i=e.dataSourcesInfo)||void 0===i?void 0:i[t])||void 0===a?void 0:a.instanceStatus})),l=e.React.useMemo((()=>pt(i)),[i]);return{valid:l,render:a&&a!==e.DataSourceStatus.NotReady&&r&&r!==e.DataSourceStatus.CreateError&&l}})(null==d?void 0:d.dataSourceId,c),A=!w||M||!y||h.length<=1,R=(null===(a=$(c))||void 0===a?void 0:a[1])||p||"column",[x,F]=mt(T,z,d,S,null!==(l=null===(r=null==c?void 0:c.series)||void 0===r?void 0:r.length)&&void 0!==l?l:0,M),D=C?e.React.createElement(rt,{type:T,tools:n,widgetId:o,enableDataAction:s}):null;return e.React.createElement(bt,{templateType:R,messageType:x,message:F,showLoading:f,background:null==c?void 0:c.background,className:"web-feature-layer-chart",showPlaceholder:A,tools:D},e.React.createElement(kt,{className:"web-chart",widgetId:o,schemaFields:h,webChart:c,options:u,chartLimits:v,useDataSource:d,onInitDragHandler:m,onLayerStatusChange:e=>{b("loading"===e)}}))},Pt=i=>{var a,r,l;const{widgetId:o,tools:n,enableDataAction:s=!0,webChart:c,options:v,chartLimits:d,useDataSource:h,outputDataSourceId:p,defaultTemplateType:m,onInitDragHandler:S}=i,{chart:g}=Re(),y=null==h?void 0:h.dataSourceId,f=(0,t.getSplitByField)(null===(r=null===(a=null==c?void 0:c.dataSource)||void 0===a?void 0:a.query)||void 0===r?void 0:r.where,!0),b=null===(l=null==c?void 0:c.dataSource)||void 0===l?void 0:l.query,[M,T]=e.React.useState([]),[C,z]=e.React.useState(),w=e.hooks.useLatest(f),A=e.React.useMemo((()=>{if(w.current&&(null==C?void 0:C[w.current])){const t=q(w.current,y),i=((e,t,i,a)=>{const r=e.find((e=>e.id===u)),l="barSeries"===r.type?r.fillSymbol:r.lineSymbol;let o=se(e,t,i,a,!1,{symbol:l});return o=o.map((e=>(e.deletable&&(e=e.without("deletable")),e))),o})(c.series,b,t,C[w.current]);return(0,e.Immutable)(i)}return null==(t=null==c?void 0:c.series)?void 0:t.filter((e=>!e.deletable&&e.id!==u));var t}),[y,w,C,null==c?void 0:c.series,b]),R=e.React.useMemo((()=>null==c?void 0:c.set("series",A)),[c,A]);return e.React.createElement(e.React.Fragment,null,e.React.createElement(Pe,{widgetId:o,webChart:c,outputDataSourceId:p,useDataSource:h,onSplitValuesChange:z,onSchemaChange:e=>{const t=Object.keys(e.fields);T(t),null==g||g.refresh(!1,!1)}}),e.React.createElement(Vt,{widgetId:o,tools:n,options:v,schemaFields:M,webChart:R,chartLimits:d,useDataSource:h,enableDataAction:s,onInitDragHandler:S,defaultTemplateType:m}))},Wt=a=>{const{outputDataSourceId:r,useDataSource:l,tools:o,options:n,webChart:s,widgetId:c,defaultTemplateType:u,enableDataAction:v,onInitDragHandler:d}=a,{dataSource:p}=Re(),m=((e,a)=>{var r,l;const o=(0,t.getSeriesType)(null==e?void 0:e.series);if(!P(o)&&"pieSeries"!==o)return!1;if(G(null===(r=null==e?void 0:e.dataSource)||void 0===r?void 0:r.query)===i.ByField)return!0;const n=((e,t,i)=>{var a,r;if(!i)return!1;if("count"===(null===(r=null===(a=null==e?void 0:e.outStatistics)||void 0===a?void 0:a[0])||void 0===r?void 0:r.statisticType))return!1;const l=null==t?void 0:t.map((e=>e.id));if(!(null==l?void 0:l.length))return!1;const o=i.getIdField();return l.includes(o)})(null===(l=null==e?void 0:e.dataSource)||void 0===l?void 0:l.query,null==e?void 0:e.series,a);return n})(s,p);return e.React.createElement(e.React.Fragment,null,m&&e.React.createElement(e.React.Fragment,null,e.React.createElement(Ve,{widgetId:c,webChart:s,outputDataSourceId:r,useDataSource:l,chartLimits:h}),e.React.createElement(Lt,{widgetId:c,tools:o,options:n,webChart:s,chartLimits:h,useDataSource:l,enableDataAction:v,onInitDragHandler:d,defaultTemplateType:u})),!m&&e.React.createElement(Pt,{widgetId:c,tools:o,webChart:s,options:n,chartLimits:h,useDataSource:l,outputDataSourceId:r,enableDataAction:v,onInitDragHandler:d,defaultTemplateType:u}))},Ht=t=>{var i;const{outputDataSources:a,useDataSources:r,config:l,id:o,enableDataAction:n,onInitDragHandler:s}=t,c=null==l?void 0:l.webChart,u=null==l?void 0:l.tools,v=null!==(i=null==l?void 0:l.options)&&void 0!==i?i:p,d=null==l?void 0:l._templateType;return e.React.createElement("div",{className:"jimu-widget widget-chart"},e.React.createElement(Ae,null,e.React.createElement(Wt,{widgetId:o,tools:u,options:v,webChart:c,useDataSource:null==r?void 0:r[0],enableDataAction:n,onInitDragHandler:s,defaultTemplateType:d,outputDataSourceId:null==a?void 0:a[0]})))};Ht.versionManager=Me;const Ut=Ht;function qt(e){o.p=e}})(),n})())}}}));